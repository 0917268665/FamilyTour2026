<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>ÊòáÈæçÈÅìËá™Èßï2026ÂÆ∂Â∫≠ÊóÖÈÅä</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&family=Noto+Serif+TC:wght@500;700&family=Zen+Old+Mincho:wght@400;700&display=swap');
        
        :root {
            --bg-paper: #f9f8f6;
            --text-main: #2c2c2c;
            --text-sub: #8c8c8c;
            --accent: #b08d76; /* Ëé´Ëò≠Ëø™Ê£ï */
            --accent-light: #f0ebe7;
        }

        body { 
            font-family: 'Noto Sans TC', sans-serif; 
            background-color: var(--bg-paper); 
            color: var(--text-main); 
            -webkit-tap-highlight-color: transparent;
            padding-top: env(safe-area-inset-top);
        }

        h1, h2, h3, .serif { font-family: 'Noto Serif TC', serif; }
        .jp-font { font-family: 'Zen Old Mincho', serif; }

        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        @keyframes fadeUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-in { animation: fadeUp 0.5s ease-out forwards; }

        .timeline-line {
            position: absolute;
            left: 24px;
            top: 40px;
            bottom: -20px;
            width: 2px;
            background-image: linear-gradient(to bottom, #e5e5e5 50%, transparent 50%);
            background-size: 2px 10px;
            z-index: 0;
        }
        .last-item .timeline-line { display: none; }

        .soft-shadow { box-shadow: 0 4px 20px rgba(0,0,0,0.04); }
        
        .nav-blur {
            background: rgba(249, 248, 246, 0.95);
            backdrop-filter: blur(10px);
            border-top: 1px solid rgba(0,0,0,0.05);
            padding-bottom: env(safe-area-inset-bottom);
        }
        .nav-item.active { color: #2c2c2c; }
        .nav-item.active i { stroke-width: 2.5px; }
        .nav-item { color: #b0b0b0; }

        .big-card-modal {
            background-color: #fffaf5;
            background-image: url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23dcc8b8' fill-opacity='0.1' fill-rule='evenodd'%3E%3Ccircle cx='3' cy='3' r='3'/%3E%3Ccircle cx='13' cy='13' r='3'/%3E%3C/g%3E%3C/svg%3E");
        }
        
        .check-icon { opacity: 0; transform: scale(0.5); transition: all 0.2s; }
        input:checked + div { background-color: #2c2c2c; border-color: #2c2c2c; }
        input:checked + div .check-icon { opacity: 1; transform: scale(1); }
        input:checked ~ span { text-decoration: line-through; color: #b0b0b0; }
        
        #header { background-color: rgba(249, 248, 246, 0.98); }
    </style>
</head>
<body class="pb-24">

    <!-- Header -->
    <div class="fixed top-0 left-0 right-0 z-30 backdrop-blur-md px-6 pt-4 pb-2 transition-all shadow-sm border-b border-stone-200/50" id="header">
        <div class="text-center mb-2">
            <p class="text-[10px] tracking-[0.3em] text-stone-400 uppercase mb-1">Family Trip</p>
            <h1 class="text-xl font-bold tracking-widest text-stone-800">ÊòáÈæçÈÅì.Á´ãÂ±±ÈªëÈÉ® <span class="border border-stone-800 rounded-full px-2 text-xs font-normal align-middle ml-1">2026.04</span></h1>
        </div>
        <div id="day-selector" class="flex overflow-x-auto gap-6 no-scrollbar justify-start px-2 pb-2 snap-x transition-all duration-300"></div>
    </div>

    <!-- Main Scroll Area -->
    <div id="main-container" class="pt-48 px-5 min-h-screen"></div>

    <!-- Navigation -->
    <div class="nav-blur fixed bottom-0 left-0 right-0 px-6 py-3 flex justify-between items-center z-40">
        <button onclick="switchTab('itinerary')" id="nav-itinerary" class="nav-item active flex flex-col items-center gap-1"><i data-lucide="map" class="w-5 h-5"></i><span class="text-[9px] font-bold tracking-widest">Ë°åÁ®ã</span></button>
        <button onclick="switchTab('hotels')" id="nav-hotels" class="nav-item flex flex-col items-center gap-1"><i data-lucide="bed-double" class="w-5 h-5"></i><span class="text-[9px] font-bold tracking-widest">‰ΩèÂÆø</span></button>
        <button onclick="switchTab('drive')" id="nav-drive" class="nav-item flex flex-col items-center gap-1"><i data-lucide="car" class="w-5 h-5"></i><span class="text-[9px] font-bold tracking-widest">Ëá™Èßï</span></button>
        <button onclick="switchTab('tools')" id="nav-tools" class="nav-item flex flex-col items-center gap-1"><i data-lucide="briefcase" class="w-5 h-5"></i><span class="text-[9px] font-bold tracking-widest">Â∑•ÂÖ∑</span></button>
    </div>

    <!-- Modal: Spot Detail -->
    <div id="detail-modal" class="fixed inset-0 z-50 hidden flex items-end sm:items-center justify-center pointer-events-none">
        <div class="absolute inset-0 bg-black/40 backdrop-blur-[2px] transition-opacity opacity-0 pointer-events-auto" id="modal-backdrop" onclick="closeModal()"></div>
        <div class="bg-white w-full max-w-md h-[85vh] sm:h-[800px] sm:rounded-2xl rounded-t-3xl shadow-2xl transform translate-y-full transition-transform duration-300 pointer-events-auto flex flex-col relative" id="modal-panel">
            
            <!-- Close Button (New) -->
            <button onclick="closeModal()" class="absolute top-4 right-4 p-2 bg-stone-100 rounded-full text-stone-500 hover:bg-stone-200 z-20 active:scale-90 transition-transform">
                <i data-lucide="x" class="w-5 h-5"></i>
            </button>

            <div class="w-full flex justify-center pt-3 pb-1" onclick="closeModal()"><div class="w-12 h-1.5 bg-gray-200 rounded-full"></div></div>
            <div class="flex-1 overflow-y-auto p-6 pt-2"><div id="modal-content"></div></div>
            <div class="p-4 border-t border-gray-50 bg-white safe-area-bottom">
                <button onclick="openMap()" class="w-full bg-[#2c2c2c] text-white py-3.5 rounded-xl font-bold tracking-wider flex items-center justify-center gap-2 active:scale-95 transition-transform">
                    <i data-lucide="navigation" class="w-4 h-4"></i> ÈñãÂïü Google Maps Â∞éËà™
                </button>
            </div>
        </div>
    </div>

    <!-- Modal: Big Card -->
    <div id="big-card-modal" class="fixed inset-0 z-[60] hidden flex items-center justify-center bg-white p-6 cursor-pointer big-card-modal" onclick="closeBigCard()">
        <div class="text-center w-full">
            <p class="text-xs text-stone-400 tracking-[0.3em] uppercase mb-10">Tap to Close</p>
            <h2 id="big-card-jp" class="text-5xl font-bold text-stone-800 mb-6 leading-tight jp-font"></h2>
            <p id="big-card-zh" class="text-xl text-stone-500 font-medium"></p>
            <div class="mt-12 border-t border-stone-200 pt-8 inline-block">
                <p class="text-sm font-bold text-stone-800 bg-white px-4 py-2 rounded-full shadow-sm">Áµ¶Â∫óÂì°ÁúãÁöÑÊîæÂ§ßÂ≠óÂç°</p>
            </div>
        </div>
    </div>

<script>
    // ---------------------------------------------------------
    // 1. DATA DEFINITIONS
    // ---------------------------------------------------------
    const TRIP_DATA = [
        {
            day: "Day 1", date: "4/11", weekday: "SAT", location: "ÂêçÂè§Â±ã",
            lat: 35.18, lon: 136.90,
            highlights: [
                { time: "07:30", type: "FLIGHT", title: "CI 0154 Âè∞Âåó ‚ûî ÂêçÂè§Â±ã", desc: "11:20 ÊäµÈÅî‰∏≠ÈÉ®ÂúãÈöõÊ©üÂ†¥ (NGO)", icon: "plane", booking: "Ë®Ç‰Ωç‰ª£Ëôü: FK3SJX" },
                { 
                    time: "12:00", type: "CAR", title: "ÂèñËªäÔºöÊó•Áî¢„É¨„É≥„Çø„Ç´„Éº", 
                    desc: "‰∏≠ÈÉ®ÂúãÈöõÊ©üÂ†¥Â∫ó / Serena e-Power", 
                    address: "ÊÑõÁü•ÁúåÂ∏∏ÊªëÂ∏Ç„Çª„É≥„Éà„É¨„Ç¢1-1", tel: "0569-38-1123", 
                    booking: "È†êÁ¥ÑËôü: 123098386", 
                    link: "https://www.tabirai.net/car/search/UserLogin.aspx?YNO=123098386",
                    tips: "ÂØÜÁ¢º: 17f23cd8 / ÁèæÂ†¥‰ªò ¬•148,632", icon: "car" 
                },
                { 
                    time: "13:30", type: "FOOD", title: "ÂçàÈ§êÔºöËì¨ËêäËªí", sub: "È∞ªÈ≠öÈ£Ø‰∏âÂêÉ (Hitsumabushi)", 
                    address: "ÊÑõÁü•ÁúåÂêçÂè§Â±ãÂ∏ÇÁÜ±Áî∞Âå∫Á•ûÊà∏Áî∫503", tel: "052-671-8686",
                    desc: "„ÄêÁôæÂπ¥ËÄÅÂ∫óÁöÑÂ†ÖÊåÅ„Äë\nËì¨ËêäËªíÊòØ„ÄåÈ∞ªÈ≠öÈ£Ø‰∏âÂêÉÔºà„Å≤„Å§„Åæ„Å∂„ÅóÔºâ„ÄçÁöÑÁôºÊ∫êÂú∞ÔºåÊìÅÊúâË∂ÖÈÅé140Âπ¥ÁöÑÊ≠∑Âè≤„ÄÇ‰ªñÂÄëÁöÑÈÜ¨Ê±ÅÊòØÂâµÊ•≠‰ª•‰æÜ‰ª£‰ª£Áõ∏ÂÇ≥ÁöÑ„ÄåÁßòÂÇ≥ÈÜ¨Ê±Å„ÄçÔºåÊØè‰∏ÄÂè£ÈÉΩÊòØÊ≠∑Âè≤ÁöÑÂë≥ÈÅì„ÄÇ\n\n„Äê‰∏âÂêÉÊ≥ïÊïôÂ≠∏„Äë\n1. Á¨¨‰∏ÄÁ¢óÔºöÂìÅÂöêÈ∞ªÈ≠öËàáÈÜ¨Ê±ÅÁöÑÂéüÂë≥„ÄÇ\n2. Á¨¨‰∫åÁ¢óÔºöÂä†ÂÖ•Êµ∑Ëãî„ÄÅËî•Ëä±„ÄÅÂ±±ËëµÁ≠â‰ΩêÊñôÔºåÂè£ÊÑüÊõ¥Ê∏ÖÁàΩ„ÄÇ\n3. Á¨¨‰∏âÁ¢óÔºöÊ∑ã‰∏äÈ´òÊπØÂÅöÊàêËå∂Ê≥°È£ØÔºåÂÆåÁæéÊî∂Â∞æ„ÄÇ",
                    menu: [ { name: "È∞ªÈ≠öÈ£Ø‰∏âÂêÉ", jp: "„Å≤„Å§„Åæ„Å∂„Åó", price: "¬•4,600" }, { name: "È∞ªÈ≠öÁéâÂ≠êÁáí", jp: "„ÅÜ„Åæ„Åç", price: "¬•1,200" } ],
                    speak: [{label:"ÊàëÊúâÈ†êÁ¥Ñ", jp:"‰∫àÁ¥Ñ„Åó„Å¶„ÅÑ„Åæ„Åô"}, {label:"ÊúâÊé®Ëñ¶ÁöÑÂóé", jp:"„Åä„Åô„Åô„ÇÅ„ÅØÔºü"}],
                    tabelog: 'https://tabelog.com/aichi/A2301/A230112/23000063/'
                },
                { time: "15:30", type: "STAY", title: "Check-in: Comfort Hotel", desc: "Nagoya Shinkansenguchi", address: "ÊÑõÁü•ÁúåÂêçÂè§Â±ãÂ∏Ç‰∏≠ÊùëÂå∫ÂâáÊ≠¶1-13-7", tel: "052-453-3111", booking: "CONF#80886535", icon: "bed" },
                { 
                    time: "18:00", type: "FOOD", title: "ÊôöÈ§êÔºö‰∏ñÁïåÁöÑÂ±±ÈÜ¨", sub: "Â§¢ÂπªÊâãÁæΩÂÖà", address: "ÂêçÂè§Â±ãÈßÖÂë®ÈÇä", 
                    desc: "„ÄêÂêçÂè§Â±ãÁöÑÈùàÈ≠ÇÈ£üÁâ©„Äë\nÂêçÂè§Â±ãÁï∂Âú∞ÁöÑËÉ°Ê§íÂë≥Êõ¥Èáç„ÄÅÊõ¥È¶ôËÑÜÔºÅÈù†ËëóÈÄôÈÅì„ÄåÂ§¢ÂπªÈõûÁøÖ„ÄçÂæÅÊúç‰∫ÜÂÖ®Êó•Êú¨„ÄÇ",
                    menu: [ { name: "Â§¢ÂπªÈõûÁøÖ (5ÊîØ)", jp: "Âπª„ÅÆÊâãÁæΩÂÖà", price: "¬•605" }, { name: "Âë≥ÂôåÁÇ∏Ë±¨Êéí‰∏≤", jp: "„Åø„Åù‰∏≤„Ç´„ÉÑ", price: "¬•495" } ],
                    tabelog: 'https://tabelog.com/aichi/A2301/A230103/23000084/'
                }
            ]
        },
        {
            day: "Day 2", date: "4/12", weekday: "SUN", location: "È´òÂ±±",
            lat: 36.14, lon: 137.25,
            highlights: [
                { time: "09:00", type: "DRIVE", title: "Âá∫ÁôºÂâçÂæÄÈ£õÈ©íÈ´òÂ±±", desc: "Á∂ìÁî±Êù±Êµ∑ÂåóÈô∏Ëá™ÂãïËªäÈÅì (Á¥Ñ2.5hr)", icon: "navigation" },
                { 
                    time: "12:00", type: "SIGHT", title: "È£õÈ©íÂè§Â∑ù", sub: "‰Ω†ÁöÑÂêçÂ≠ó ËÅñÂú∞Â∑°Á¶Æ",
                    address: "Â≤êÈòúÁúåÈ£õÈ®®Â∏ÇÂè§Â∑ùÁî∫", mapcode: "191 548 574*63",
                    desc: "„ÄêÊØîÈ´òÂ±±Êõ¥ÈùúË¨êÁöÑÁôΩÂ£ÅÂúüËóè„Äë\nÂ¶ÇÊûúÊÇ®ÂñúÊ≠°ÈõªÂΩ±„Ää‰Ω†ÁöÑÂêçÂ≠ó„ÄãÔºåÈÄôË£°ÁµïÂ∞çÊòØÂøÖË®™ËÅñÂú∞„ÄÇÁÄßÂ∞ãÊâæ‰∏âËëâÁöÑËªäÁ´ô„ÄÅÂúñÊõ∏È§®ÈÉΩÂú®ÈÄôË£°„ÄÇ\n\n„ÄêÁÄ®Êà∂Â∑ùËàáÈØâÈ≠ö„Äë\nÈÄôÊ¢ùÊµÅÁ∂ìÁôΩÂ£ÅÂúüËóèË°óÁöÑÂ∞èÊ≤≥Â∑ùÔºåÈ£ºÈ§äËëó‰∏äÂçÉÊ¢ùËâ≤ÂΩ©ÊñëÊñïÁöÑÈå¶ÈØâ„ÄÇÂÜ¨Â§©ÊôÇÁÇ∫‰∫ÜÊÄïÈØâÈ≠öÂáçÊ≠ªÔºåÂ±ÖÊ∞ëÊúÉÂ∞áÁâ†ÂÄëÊê¨ÂÆ∂Âà∞ËºÉÊ∫´ÊöñÁöÑÊ±†Â°òÔºåÊò•Â§©ÂÜçÊê¨Âõû‰æÜÔºåÊòØÁï∂Âú∞ÁâπÊúâÁöÑ„ÄåÈØâÈ≠öÊê¨ÂÆ∂„ÄçÁøí‰øó„ÄÇ"
                },
                { 
                    time: "17:00", type: "FOOD", title: "ÊôöÈ§êÔºöÂë≥ËóèÂ§©Âúã", sub: "JAËæ≤ÂçîÁõ¥Ááü È£õÈ©íÁâõÁáíËÇâ",
                    address: "Â≤êÈòúÁúåÈ´òÂ±±Â∏ÇËä±Èáå4-147", tel: "0577-37-1129",
                    desc: "„ÄêÁµïÂ∞ç‰∏çÊúÉË∏©Èõ∑ÁöÑÈ£õÈ©íÁâõ„Äë\nÈÄôÂÆ∂Â∫óÊòØJAÔºàÊó•Êú¨Ëæ≤ÂçîÔºâÁõ¥ÁáüÁöÑÔºåÈÄôÊÑèÂë≥ËëóËÇâÊ∫êÁµïÂ∞çÊñ∞ÈÆÆ„ÄÅÂìÅË≥™Áî±Ëæ≤ÂçîÊéõ‰øùË≠âÔºåËÄå‰∏îÂÉπÊ†ºÊØî‰∏ÄËà¨È´òÁ¥öÁáíËÇâÂ∫óË¶™Ê∞ë„ÄÇ\n\n„ÄêÈÉ®‰ΩçÊé®Ëñ¶„Äë\nÂ¶ÇÊûúÈ†êÁÆóË∂≥Â§†ÔºåÁõ¥‰∏ä„ÄåÈ£õÈ©íÁâõÁõõÂêàÔºàÊãºÁõ§Ôºâ„ÄçÔºåÂèØ‰ª•‰∏ÄÊ¨°ÂêÉÂà∞ÈáåËÇå„ÄÅ‰∫îËä±„ÄÅÈ™∞Â≠êÁâõÁ≠â‰∏çÂêåÈÉ®‰ΩçÔºåÊÑüÂèóÊ≤πËÑÇÂú®Âè£‰∏≠ËûçÂåñÁöÑÂπ∏Á¶èÊÑü„ÄÇ",
                    menu: [ { name: "Âë≥ËóèÊãºÁõ§", jp: "Âë≥ËîµÁõõ„Çä", price: "¬•9,800" }, { name: "Áâπ‰∏äÁâõ‰∫îËä±", jp: "Áâπ‰∏ä„Ç´„É´„Éì", price: "¬•2,480" } ],
                    tabelog: 'https://tabelog.com/gifu/A2104/A210401/21000287/'
                },
                { time: "19:00", type: "STAY", title: "hotel around TAKAYAMA", desc: "Ascend Hotel Collection", address: "Â≤êÈòúÁúåÈ´òÂ±±Â∏ÇËä±Â≤°Áî∫1-42-7", tel: "0577-32-5002", booking: "CONF#78677355", icon: "bed" }
            ]
        },
        {
            day: "Day 3", date: "4/13", weekday: "MON", location: "Â•ßÈ£õÈ©í",
            lat: 36.22, lon: 137.52,
            highlights: [
                { 
                    time: "09:30", type: "SIGHT", title: "Êñ∞Á©óÈ´òÈõôÂ±§Á∫úËªä", sub: "Ê®ôÈ´ò2156m Èõ≤‰∏äÂ∏ÇÁïå",
                    address: "Â≤êÈòúÁúåÈ´òÂ±±Â∏ÇÂ••È£õÈ®®Ê∏©Ê≥âÈÉ∑Êñ∞Á©ÇÈ´ò", tel: "0578-89-2252",
                    desc: "„ÄêÁ±≥ÂÖ∂Êûó‰∫åÊòüÁµïÊôØ„Äë\nÈÄôÊòØÊó•Êú¨ÂîØ‰∏ÄÁöÑÈõôÂ±§Á∫úËªäÔºÅÂ±±È†ÇÁöÑÂ±ïÊúõÂè∞ÂèØ‰ª•ÁúãÂà∞Êßç‰πãÂ≤≥„ÄÅÁ©óÈ´òÈÄ£Â≥∞ÁöÑ 360 Â∫¶ÂÖ®ÊôØ„ÄÇ\n\n„ÄêÂ∞éÈÅäÂ∞èÊíáÊ≠•„Äë\nÂ±±È†ÇËàáÂ±±‰∏ãÊ∫´Â∑ÆÂæàÂ§ßÔºåË´ãÂãôÂøÖÂ∏∂ËëóÂ§ñÂ•ó„ÄÇÂ±±È†ÇÊúâÂêçÁâ©„ÄåÈõ≤È†ÇÈ∫µÂåÖ„ÄçÔºåÂèØ‰ª•Âú®Èõ≤Á´Ø‰∏ä‰∫´Âèó‰∏ãÂçàËå∂„ÄÇ"
                },
                { 
                    time: "13:00", type: "FOOD", title: "ÂçàÈ§êÔºöCenter4 Hamburgers", sub: "Ê≠êÁæéÂÆ¢ÊúÄÊÑõ È£õÈ©íÁâõÊº¢Â†°",
                    address: "Â≤êÈòúÁúåÈ´òÂ±±Â∏Ç‰∏ä‰∏Ä‰πãÁî∫94", tel: "0577-36-4527",
                    desc: "„ÄêËóèÂú®Âè§Ê∞ëÂÆ∂Ë£°ÁöÑÊº¢Â†°Â∫ó„Äë\nÈõñÁÑ∂Â§ñËßÄÊòØÂÇ≥Áµ±ÁöÑÊó•ÂºèÂè§Ê∞ëÂÆ∂ÔºåÊé®ÈñãÈñÄÂçªÊòØÊøÉÊøÉÁöÑÁæéÂºèÂæ©Âè§È¢®„ÄÇÈÄôË£°ÁöÑÈ£õÈ©íÁâõÊº¢Â†°ÊéíÂ§öÊ±ÅÂéöÂØ¶ÔºåÂí¨‰∏ãÂéªËÇâÊ±ÅÊúÉÂô¥ÁôºÔºåÊòØTripAdvisor‰∏äÈ´òÂ±±ÊéíÂêçÁ¨¨‰∏ÄÁöÑÂêçÂ∫ó„ÄÇ\n\n‚ö†Ô∏è Ê≥®ÊÑèÔºöÂ∫óÂÆ∂Â∫ß‰ΩçÊ•µÂ∞ëÔºåÂº∑ÁÉàÂª∫Ë≠∞‰∏ÄÈñãÂ∫óÂ∞±ÂéªÔºåÊàñÊòØÊúâÊéíÈöäÁöÑÂøÉÁêÜÊ∫ñÂÇô„ÄÇ",
                    menu: [ { name: "È£õÈ©íÁâõÊº¢Â†°", jp: "È£õÈ®®Áâõ„Éê„Éº„Ç¨„Éº", price: "¬•2,850" }, { name: "ÈÖ™Ê¢®Ëµ∑Âè∏Êº¢Â†°", jp: "„Ç¢„Éú„Ç´„Éâ„ÉÅ„Éº„Ç∫", price: "¬•1,450" } ],
                    tabelog: 'https://tabelog.com/gifu/A2104/A210401/21008670/'
                },
                { time: "18:00", type: "STAY", title: "hotel around TAKAYAMA", desc: "Á∫å‰Ωè", booking: "CONF#78677355", icon: "bed" }
            ]
        },
        {
            day: "Day 4", date: "4/14", weekday: "TUE", location: "È´òÂ±±Á•≠",
            lat: 36.14, lon: 137.25,
            highlights: [
                { 
                    time: "All Day", type: "SIGHT", title: "Êò•‰πãÈ´òÂ±±Á•≠ (Â±±ÁéãÁ•≠)", sub: "Êó•Êú¨‰∏âÂ§ßÁæéÁ•≠",
                    address: "Â≤êÈòúÁúåÈ´òÂ±±Â∏Ç Êó•ÊûùÁ•ûÁ§æÂë®ÈÇä", 
                    desc: "„ÄêÊ¥ªÂãïÁöÑÈôΩÊòéÈñÄ„Äë\nÈ´òÂ±±Á•≠ÁöÑ‰∏ªËßíÊòØ 12 Â∫ßË£ùÈ£æËèØÈ∫óÁöÑ„ÄåÂ±ãÂè∞ÔºàËä±ËªäÔºâ„Äç„ÄÇÈÄô‰∫õÂ±ãÂè∞Â±ïÁèæ‰∫ÜÈ£õÈ©íÂ∑•Âå†Á≤æÊπõÁöÑÊú®Â∑•„ÄÅÊºÜËóùËàáÈáëÂ±¨Â∑•Ëóù„ÄÇ\n\n„ÄêÂøÖÁúãÔºöÊ©üÈóú‰∫∫ÂÅ∂„Äë\nÂÖ∂‰∏≠ÂπæÂ∫ßÂ±ãÂè∞‰∏äÊúâ„ÄåÊ©üÈóú‰∫∫ÂÅ∂ÔºàKarakuriÔºâ„ÄçÔºåÁî±ÊìçÂÅ∂Â∏´Âú®ÂÖßÈÉ®Áî®Á∑öÊìçÊéßÔºå‰∫∫ÂÅ∂ÊúÉÂÅöÂá∫ËÆäËáâ„ÄÅÂØ´Â≠ó„ÄÅË∑≥ËàûÁ≠âÈ©ö‰∫∫Âãï‰ΩúÔºåÂçÉËê¨Âà•ÈåØÈÅéË°®ÊºîÊôÇÈñìÔºÅ"
                },
                { 
                    time: "12:00", type: "FOOD", title: "Â∞èÂêÉÔºöÂùÇÂè£Â±ã", sub: "È£õÈ©íÁâõÊè°Â£ΩÂè∏",
                    address: "Â≤êÈòúÁúåÈ´òÂ±±Â∏Ç‰∏ä‰∏â‰πãÁî∫90",
                    desc: "„ÄêËÄÅË°óÊï£Ê≠•ÁæéÈ£ü„Äë\nÈÄôÂÆ∂ÊòØËÄÅË°ó‰∏äÊúÄÊúâÂêçÁöÑÂ∞èÂêÉÂ∫ó‰πã‰∏Ä„ÄÇ‰ªñÂÄëÁöÑÈ£õÈ©íÁâõÊè°Â£ΩÂè∏‰∏çÊòØÊîæÂú®Áõ§Â≠ê‰∏äÔºåËÄåÊòØÊîæÂú®‰∏ÄÁâá„Äå‰ªôË≤ù„Äç‰∏äÔºåÂêÉÂÆåÂ£ΩÂè∏ÈÄ£Áõ§Â≠ê‰∏ÄËµ∑ÂêÉÊéâÔºåÁí∞‰øùÂèàÁæéÂë≥ÔºÅ\nÁâõËÇâË°®Èù¢Á®çÂæÆÁÇôÁáíÈÅéÔºåÊ≤πËÑÇÈ¶ôÊ∞£ÈÄº‰∫∫ÔºåÂÖ•Âè£Âç≥Âåñ„ÄÇ",
                    menu: [ { name: "È£õÈ©íÁâõÊè°Â£ΩÂè∏(2Ë≤´)", jp: "È£õÈ®®Áâõ„Å´„Åé„ÇäÂØøÂè∏", price: "¬•800" } ],
                    tabelog: 'https://tabelog.com/gifu/A2104/A210401/21000020/'
                },
                { time: "18:00", type: "STAY", title: "hotel around TAKAYAMA", desc: "Á∫å‰Ωè", booking: "CONF#78677355", icon: "bed" }
            ]
        },
        {
            day: "Day 5", date: "4/15", weekday: "WED", location: "ÂØåÂ±±",
            lat: 36.69, lon: 137.21,
            highlights: [
                { time: "AM", type: "SIGHT", title: "È´òÂ±±Á•≠ (Day 2)", desc: "ÊääÊè°ÊúÄÂæåÊ©üÊúÉÊ¨£Ë≥ûÂ±ãÂè∞Â∑°ÈÅä", icon: "flag" },
                { time: "17:00", type: "DRIVE", title: "ÂâçÂæÄÂØåÂ±±", desc: "ËªäÁ®ãÁ¥Ñ 1.5 Â∞èÊôÇ", icon: "car" },
                { 
                    time: "19:00", type: "FOOD", title: "ÊôöÈ§êÔºöÁôΩ„Åà„Å≥‰∫≠ (ÁôΩËù¶‰∫≠)", sub: "ÂØåÂ±±ÁÅ£ÁöÑÂØ∂Áü≥",
                    address: "ÂØåÂ±±ÁúåÂØåÂ±±Â∏ÇÊòéËº™Áî∫1-220 (ÂØåÂ±±Á´ôÂÖß)", tel: "076-433-0355",
                    desc: "„ÄêÂØåÂ±±ÁÅ£ÁöÑÂØ∂Áü≥„Äë\n‰æÜÂà∞ÂØåÂ±±ÔºåÁµïÂ∞ç‰∏çËÉΩÈåØÈÅé„ÄåÁôΩËù¶„Äç„ÄÇÈÄôÁ®ÆËù¶Â≠êÂè™ÊúâÂú®ÂØåÂ±±ÁÅ£ÈÄôÁç®ÁâπÂú∞ÂΩ¢ÊâçËÉΩÂ§ßÈáèÊçïÁç≤„ÄÇÁôΩËù¶‰∫≠‰ΩçÊñºÂØåÂ±±ËªäÁ´ôÊóÅÔºåÊúÄÂá∫ÂêçÁöÑÂ∞±ÊòØ„ÄåÁôΩËù¶Â§©‰∏º„Äç„ÄÇ\n\nÊØè‰∏ÄÁ¢óÂ§©‰∏ºÈÉΩÈã™Êªø‰∫ÜÊï∏ÂçÅÈöªÊâãÂ∑•ÂâùÊÆºÁöÑÁôΩËù¶ÔºåÁÇ∏ÂæóÈÖ•ËÑÜÈÆÆÁîúÔºåÂÆåÂÖ®‰∏çÈúÄË¶ÅÊ≤æÈÜ¨Â∞±ÈùûÂ∏∏Â•ΩÂêÉÔºÅ",
                    menu: [ { name: "ÁôΩËù¶Â§©‰∏º", jp: "ÁôΩ„Åà„Å≥Â§©‰∏º", price: "¬•1,680" }, { name: "ÁôΩËù¶Âà∫Ë∫´‰∏º", jp: "ÁôΩ„Åà„Å≥Âà∫Ë∫´‰∏º", price: "¬•2,980" } ],
                    tabelog: 'https://tabelog.com/toyama/A1601/A160101/16000041/'
                },
                { time: "20:00", type: "STAY", title: "Comfort Hotel Toyama", desc: "Toyama Station", address: "ÂØåÂ±±ÁúåÂØåÂ±±Â∏ÇÂÆùÁî∫1-3-2", tel: "076-433-3111", booking: "CONF#80924504", icon: "bed" }
            ]
        },
        {
            day: "Day 6", date: "4/16", weekday: "THU", location: "Á´ãÂ±±ÈªëÈÉ®",
            lat: 36.57, lon: 137.60,
            highlights: [
                { 
                    time: "07:00", type: "SIGHT", title: "Á´ãÂ±±ÈªëÈÉ® Èõ™‰πãÂ§ßË∞∑", sub: "ÈñãÂ±±ÂàùÊúüÈôêÂÆöÁµïÊôØ",
                    address: "Á´ãÂ±±ÈßÖ (ËªäÂÅúÊ≠§Ëôï)", mapcode: "669 222 537*11",
                    desc: "„ÄêÂÖ≠Á®Æ‰∫§ÈÄöÂ∑•ÂÖ∑ÁöÑÊé•ÂäõË≥Ω„Äë\nÁÇ∫‰∫Ü‰øùË≠∑Áí∞Â¢ÉÔºåÁßÅÂÆ∂ËªäÂè™ËÉΩÂÅúÂú®Â±±‰∏ãÁöÑ„ÄåÁ´ãÂ±±Á´ô„Äç„ÄÇÊé•‰∏ã‰æÜÊÇ®Â∞áÊèõ‰πòÁ∫úËªä„ÄÅÈ´òÂéüÂ∑¥Â£´„ÄÅÁÑ°ËªåÈõªËªäÁ≠â 6 Á®Æ‰∫§ÈÄöÂ∑•ÂÖ∑ÔºåÊ©´Ë∂äÈòøÁàæÂçëÊñØÂ±±ËÑà„ÄÇ\n\n„ÄêÈõ™‰πãÂ§ßË∞∑„Äë\nÂú®ÂÆ§Â†ÇÁ´ôÔºàÊµ∑Êãî2450mÔºâÔºåÈ´òÂéüÂ∑¥Â£´ÊúÉË°åÈßõÂú®ÂÖ©ÂÅ¥È´òÈÅî15-20ÂÖ¨Â∞∫ÁöÑÈõ™Â£Å‰πãÈñì„ÄÇÊÇ®ÂèØ‰ª•‰∏ãËªäË¶™Ëá™Ëµ∞Âú®ÈÄôÊ¢ù„ÄåÈõ™‰πãÂ≥ΩË∞∑„Äç‰∏≠ÔºåÊÑüÂèóÂ§ßËá™ÁÑ∂ÁöÑÈúáÊíºÂäõ„ÄÇ"
                },
                { 
                    time: "18:00", type: "FOOD", title: "ÊôöÈ§êÔºöÂªªËª¢„Å®„ÇÑ„ÅæÈÆ®", sub: "ÂØåÂ±±ÁÅ£Áõ¥ÈÄÅ",
                    address: "ÂØåÂ±±ÁúåÂØåÂ±±Â∏ÇÊ°úÁî∫1-4-10", tel: "076-431-5448",
                    desc: "„ÄêËø¥ËΩâÂ£ΩÂè∏ÁöÑÈ†ÇÈªû„Äë\nÂØåÂ±±ÁöÑËø¥ËΩâÂ£ΩÂè∏Ê∞¥Ê∫ñÊ•µÈ´òÔºÅÈÄôÂÆ∂Â∫óÂº∑Ë™ø„ÄåÂ§©ÁÑ∂ÁöÑÈ≠öÂ°ò‚ÄîÂØåÂ±±ÁÅ£„ÄçÁõ¥ÈÄÅ„ÄÇÈÄôË£°ÁöÑÈ≠öÁç≤Âõ†ÁÇ∫Ë∑ùÈõ¢Ê∏ØÂè£ËøëÔºåÈÆÆÂ∫¶Ê≤íË©±Ë™™„ÄÇ\nÂøÖÈªûÂØåÂ±±‰∏âÂØ∂ÔºöÁôΩËù¶„ÄÅËû¢ÂÖâÁÉèË≥ä„ÄÅÈ∞§È≠öÔºàBuriÔºâ„ÄÇ",
                    menu: [ { name: "ÂØåÂ±±ÁÅ£‰∏âÁ®ÆÁõõ", jp: "ÂØåÂ±±Êπæ‰∏âÁ®ÆÁõõ„Çä", price: "¬•680" }, { name: "Ëû¢ÂÖâÁÉèË≥ä", jp: "„Éõ„Çø„É´„Ç§„Ç´", price: "¬•380" } ],
                    tabelog: 'https://tabelog.com/toyama/A1601/A160101/16007229/'
                },
                { time: "20:00", type: "STAY", title: "Comfort Hotel Toyama", desc: "Á∫å‰Ωè", booking: "CONF#80924504", icon: "bed" }
            ]
        },
        {
            day: "Day 7", date: "4/17", weekday: "FRI", location: "‰∏âÈáç",
            lat: 35.08, lon: 136.70,
            highlights: [
                { 
                    time: "09:00", type: "SIGHT", title: "Èõ®Êô¥Êµ∑Â≤∏", sub: "Êµ∑Ë∂äÁ´ãÂ±±ÁµïÊôØ",
                    address: "ÂØåÂ±±ÁúåÈ´òÂ≤°Â∏ÇÂ§™Áî∞", mapcode: "128 393 254*55",
                    desc: "„Äê‰∏ñÁïåÁ¥öÂ•áÊôØ„Äë\nÈÄôÊòØ‰∏ñÁïå‰∏äÂ∞ëÊï∏ÂèØ‰ª•„ÄåÈöîËëóÂ§ßÊµ∑Áú∫Êúõ3000ÂÖ¨Â∞∫Á¥öÈõ™Â±±„ÄçÁöÑÂú∞Êñπ„ÄÇÂâçÊôØÊòØÂ•≥Â≤©ËàáÊπõËóçÁöÑÂØåÂ±±ÁÅ£ÔºåËÉåÊôØÊòØÈõÑÂÅâÁöÑÁ´ãÂ±±ÈÄ£Â≥∞ÔºåÈÅãÊ∞£Â•ΩÈÅáÂà∞Êô¥Â§©ÊôÇÔºåÁæéÂæóÂÉè‰∏ÄÂπÖÁï´„ÄÇ\n\n„ÄêÁæ©Á∂ìÂ≤©ÂÇ≥Ë™™„Äë\nÊµ∑Â≤∏ÈÇäÊúâ‰∏ÄÂ°äÂ∑®Â§ßÁöÑÂ≤©Áü≥Âè´ÂÅö„ÄåÁæ©Á∂ìÂ≤©„Äç„ÄÇÂÇ≥Ë™™Ê∫êÁæ©Á∂ìÂú®Ë¢´Âì•Âì•Ê∫êË≥¥ÊúùËøΩÊÆ∫ÈÄÉ‰∫°Ëá≥ÂåóÈô∏ÊôÇÔºåÊõæÂú®Ê≠§Â≤©Áü≥‰∏ãË∫≤ÈÅøÈ©üÈõ®Á≠âÂæÖÂ§©Êô¥ÔºåÈÄô‰πüÊòØ„ÄåÈõ®Êô¥„ÄçÂú∞ÂêçÁöÑÁî±‰æÜ„ÄÇ"
                },
                { time: "14:00", type: "DRIVE", title: "Âçó‰∏ãÂâçÂæÄÂêçÂè§Â±ã/‰∏âÈáç", desc: "ËªäÁ®ãÁ¥Ñ 3 Â∞èÊôÇ", icon: "car" },
                { 
                    time: "17:30", type: "SIGHT", title: "ÂêçËä±‰πãÈáå", sub: "Êó•Êú¨ÊúÄÂ§ßÁáàÊµ∑",
                    address: "‰∏âÈáçÁúåÊ°ëÂêçÂ∏ÇÈï∑Â≥∂Áî∫ÈßíÊ±üÊºÜÁïë270", tel: "0594-41-0787",
                    desc: "„ÄêÂú∞‰∏äÁöÑÈäÄÊ≤≥„Äë\nÈÄôË£°ÈÄ£Á∫åÂ§öÂπ¥Ë¢´Ë©ïÁÇ∫Êó•Êú¨ÂøÖÁúãÁöÑÂ§úÈñìÁáàÈ£æÁ¨¨‰∏ÄÂêç„ÄÇÊúÄËëóÂêçÁöÑÊòØÂÖ®Èï∑200ÂÖ¨Â∞∫ÁöÑ„ÄåÂÖâ‰πãÈößÈÅì„ÄçÔºåÊï∏ÁôæËê¨È°ÜÊöñÈªÉËâ≤ÁöÑLEDÁáàÊ≥°Â∞áÊÇ®ÂåÖÂúçÔºåÊ•µÂ∫¶Êµ™Êº´„ÄÇ\n\nÂúíÂçÄÂÖßÁöÑ„ÄåÁßãÊµ∑Ê£†Ëä±Âúí„Äç‰πüÈùûÂ∏∏Â£ØËßÄÔºåÂª∫Ë≠∞Ë≥ºË≤∑Â•óÁ•®ÈÄ≤ÂÖ•ÂèÉËßÄ„ÄÇ"
                },
                { 
                    time: "19:00", type: "FOOD", title: "ÊôöÈ§êÔºöÂ±±Êú¨Â±ãÊú¨Â∫ó", sub: "Âë≥ÂôåÁÉèÈæçÈ∫µ",
                    address: "ÊÑõÁü•ÁúåÂêçÂè§Â±ãÂ∏Ç‰∏≠ÊùëÂå∫ÂêçÈßÖ3-12-19", tel: "052-565-0278",
                    desc: "„ÄêË∂ÖÁ°¨Ê¥æÔºÅÂêçÂè§Â±ãÂêçÁâ©„Äë\nÁ¨¨‰∏ÄÊ¨°ÂêÉÁöÑ‰∫∫ÂèØËÉΩÊúÉÂöá‰∏ÄË∑≥Ôºö„ÄåÈ∫µËäØÊÄéÈ∫ºÊ≤íÁÜüÔºü„ÄçÂà•ÊìîÂøÉÔºåÈÄôÂ∞±ÊòØÂ±±Êú¨Â±ãÊú¨Â∫óÁöÑÁâπËâ≤ÔºÅ‰ΩøÁî®Á≤óÁ°¨ÁöÑÁîüÈ∫µÁõ¥Êé•ÊîæÂÖ•Âë≥ÂôåÈ´òÊπØÁáâÁÖÆÔºåÂè£ÊÑüÊ•µÂÖ∑ÂöºÂãÅ„ÄÇ\n\nÂª∫Ë≠∞Êê≠ÈÖçÂÖçË≤ªÁ∫åÂä†ÁöÑÊº¨Áâ©ÔºàÁôΩËèú„ÄÅËòøËîîÔºâÔºåÈùûÂ∏∏Ëß£ËÜ©„ÄÇ",
                    menu: [ { name: "Âë≥ÂôåÁÉèÈæçÈ∫µ", jp: "Âë≥ÂôåÁÖÆËæº„Åø„ÅÜ„Å©„Çì", price: "¬•1,200" } ],
                    tabelog: 'https://tabelog.com/aichi/A2301/A230103/23000122/'
                },
                { time: "21:00", type: "STAY", title: "Comfort Hotel Nagoya Fushimi", desc: "‰ºèË¶ãÁ´ô", address: "ÊÑõÁü•ÁúåÂêçÂè§Â±ãÂ∏Ç‰∏≠Âå∫Èå¶2-19-14", tel: "052-201-3111", booking: "CONF#80924952", icon: "bed" }
            ]
        },
        {
            day: "Day 8", date: "4/18", weekday: "SAT", location: "ÊÑõÁü•",
            lat: 35.17, lon: 137.09,
            highlights: [
                { 
                    time: "10:00", type: "SIGHT", title: "ÂêâÂçúÂäõÂÖ¨Âúí", sub: "ÂÆÆÂ¥éÈßøÁöÑÂ§¢Âπª‰∏ñÁïå",
                    address: "ÊÑõÁü•ÁúåÈï∑‰πÖÊâãÂ∏ÇËå®„Ç±ÂªªÈñì‰πô1533-1", 
                    desc: "„ÄêÁúüÁöÑËµ∞ÈÄ≤ÈõªÂΩ±Ë£°„Äë\nÂêâÂçúÂäõÂÖ¨Âúí‰ΩçÊñºÊÑõÁü•Á∏£ÔºåÊòØÂ∞áÂéüÊú¨ÁöÑ„ÄåÊÑõ„ÉªÂú∞ÁêÉÂçöÁ¥ÄÂøµÂÖ¨Âúí„ÄçÈáçÊñ∞Ë¶èÂäÉÔºåËÆìÂÆÆÂ¥éÈßøÁ≠Ü‰∏ãÁöÑÂ•áÂπª‰∏ñÁïåÁúüÂØ¶ÈáçÁèæ„ÄÇÈÄôË£°Ëàá‰∏ÄËà¨‰∏ªÈ°åÊ®ÇÂúíÊúÄÂ§ßÁöÑ‰∏çÂêåÊòØ‚Äî‚ÄîÊ≤íÊúâÂ§ßÂûãÈõ≤ÈúÑÈ£õËªäÔºåÊ≤íÊúâ‰∫∫ÂÅ∂Ë£ùË°®ÊºîÔºå‰∏ªÊâì„ÄåÊï£Ê≠•„ÄÅÁôºÁèæ„ÄÅÊÑüÂèó„Äç„ÄÇ\n\n„Äê‰∏ªË¶ÅÂçÄÂüü„Äë\n1. ÂêâÂçúÂäõÂ§ßÂÄâÂ∫´ÔºöÈÄôÊòØÂÆ§ÂÖßÂûãÁöÑÂ§ßÂ±ïË¶ΩÈ§®ÔºåÊî∂Ëóè‰∫ÜÂêâÂçúÂäõ‰ΩúÂìÅÁöÑÁßòÂØÜ„ÄÇÊÇ®ÂèØ‰ª•Âú®ÈÄôË£°Ëàá„ÄäÁ•ûÈö±Â∞ëÂ•≥„ÄãÁöÑÁÑ°ËáâÁî∑ÂêàÁÖßÔºåÊàñÊòØÁúãÂà∞„ÄäÂ§©Á©∫‰πãÂüé„ÄãÂ∑®Â§ßÁöÑÊ©üÂô®‰∫∫ÂÖµ„ÄÇ\n\n2. ÈùíÊò•‰πã‰∏òÔºöÈáçÁèæ‰∫Ü„ÄäÂøÉ‰πãË∞∑„Äã‰∏≠ÁöÑÂè§Ëë£Â∫ó„ÄåÂú∞ÁêÉÂ±ã„ÄçÔºåÁ´ôÂú®È´òËôïÂèØ‰ª•‰øØÁû∞ÂúíÂçÄ„ÄÇ\n\n3. Dondoko‰πãÊ£ÆÔºö‰ª•„ÄäÈæçË≤ì„ÄãÁÇ∫‰∏ªÈ°åÔºåÁ©øÈÅéÊ£ÆÊûóÊ≠•ÈÅìÂæåÔºåÊúÉÁúãÂà∞Â∞èÊúàÂíåÂ∞èÊ¢ÖÁöÑÂÆ∂„ÄÇ\n\nÈÄôË£°ÁöÑÊØèÂÄãËßíËêΩÈÉΩËóèËëóÁ¥∞ÁØÄÔºåË´ãÊîæÊÖ¢ËÖ≥Ê≠•ÔºåÂú®Ê£ÆÊûóËàáÂæÆÈ¢®‰∏≠Â∞ãÊâæÂ±¨ÊñºÊÇ®ÁöÑÁ´•Ë©±ÂõûÊÜ∂ÂêßÔºÅ",
                    tips: "È†êÁ¥ÑËôü: GHP-2026-XXXX"
                },
                { 
                    time: "17:00", type: "FOOD", title: "ÊôöÈ§êÔºö‰∏∏ÂìàÈ£üÂ†Ç („Åæ„Çã„ÅØÈ£üÂ†Ç)", sub: "ÁâπÂ§ßÁÇ∏Ëù¶",
                    address: "‰∏≠ÈÉ®ÂúãÈöõÊ©üÂ†¥ÂÖß / ÊàñÂ∏∏ÊªëÊú¨Â∫ó",
                    desc: "„ÄêÊÑõÁü•Á∏£Ê∞ëÁöÑÊÑõ„Äë\nÈÄôÂÆ∂È£üÂ†Ç‰ª•„ÄåÂ∑®ÁÑ°Èú∏ÁÇ∏Ëù¶„ÄçËÅûÂêçÔºåËù¶ËÇâÁ∑äÂØ¶ÂΩàÁâôÔºåÂ§ñÁöÆÈÖ•ËÑÜ‰∏çÊ≤πËÜ©„ÄÇÈÄôÊòØÂú®Âú∞‰∫∫ÂæûÂ∞èÂêÉÂà∞Â§ßÁöÑÁæéÂë≥ÔºåÈõñÁÑ∂ÂÉπÊ†ºÁ®çÈ´òÔºå‰ΩÜ‰ªΩÈáèÁµïÂ∞çÂ∞çÂæóËµ∑ÂÉπÊ†º„ÄÇ",
                    menu: [ { name: "ÁâπÂ§ßÁÇ∏Ëù¶ÂÆöÈ£ü", jp: "„Ç®„Éì„Éï„É©„Ç§ÂÆöÈ£ü", price: "¬•2,200" } ],
                    tabelog: 'https://tabelog.com/aichi/A2304/A230402/23001853/'
                },
                { time: "20:00", type: "STAY", title: "Comfort Hotel Central Int Airport", desc: "Ê©üÂ†¥Â≥∂ÂÖß", address: "ÊÑõÁü•ÁúåÂ∏∏ÊªëÂ∏Ç„Çª„É≥„Éà„É¨„Ç¢4-2-3", tel: "0569-38-7211", booking: "CONF#80889756", icon: "bed" }
            ]
        },
        {
            day: "Day 9", date: "4/19", weekday: "SUN", location: "ËøîÂè∞",
            lat: 34.86, lon: 136.81,
            highlights: [
                { 
                    time: "09:00", type: "SHOP", title: "ÊúÄÂæåÊé°Ë≤∑ÔºöÊ©üÂ†¥ÂÖçÁ®ÖÂ∫ó", sub: "Ëù¶È§Ö / Ëµ§Á¶è",
                    desc: "„ÄêÂøÖË≤∑‰º¥ÊâãÁ¶Æ„Äë\n1. Ëù¶È§Ö‰πãÈáå („Åà„Å≥„Åõ„Çì„Åπ„ÅÑ„ÅÆÈáå)Ôºö‰æøÂÆúÂèàÂ§ßÂåÖÔºåÁ∂úÂêàÂè£Âë≥ÊúÄÂèóÊ≠°Ëøé„ÄÇ\n2. Ëµ§Á¶è (Akafuku)Ôºö‰ºäÂã¢ÂêçÁâ©ÔºåÁ¥ÖË±ÜÊ≥•ÂåÖÈ∫ªÁ≥¨Ôºå‰øùÂ≠òÊúüÈôêÁü≠ÔºåÈÅ©ÂêàÂõûÂúãÈ¶¨‰∏äÂêÉ„ÄÇ"
                },
                { time: "10:00", type: "CAR", title: "ÈÇÑËªäÔºöÊó•Áî¢„É¨„É≥„Çø„Ç´„Éº", desc: "‰∏≠ÈÉ®ÂúãÈöõÊ©üÂ†¥Â∫ó", tips: "Ë´ãÂä†ÊªøÊ≤π‰∏¶‰øùÁïôÊî∂Êìö", icon: "corner-up-left" },
                { time: "12:20", type: "FLIGHT", title: "CI 0155 ÂêçÂè§Â±ã ‚ûî Âè∞Âåó", desc: "14:30 ÊäµÈÅîÊ°ÉÂúí (TPE)", icon: "plane", booking: "Ë®Ç‰Ωç‰ª£Ëôü: FK3SJX" }
            ]
        }
    ];

    const TOOLS_DATA = {
        checklist: [
            { id: 'docs', name: 'ÈáçË¶ÅÊñá‰ª∂', color: 'bg-[#e3dcd2] text-[#8c7b6c]', items: [ { id: 'check_doc_passport', label: 'Ë≠∑ÁÖß' }, { id: 'check_doc_money', label: 'Êó•Âπ£ÁèæÈáë' }, { id: 'check_doc_vjw', label: '‰ø°Áî®Âç°' }, { id: 'check_doc_ticket', label: '‰øùÈö™ÂñÆ' } ] },
            { id: 'tech', name: '3C Áî¢ÂìÅ', color: 'bg-[#d6e0e2] text-[#5c7a80]', items: [ { id: 'check_3c_phone', label: 'Á∂≤Âç°/Êº´ÈÅä' }, { id: 'check_3c_charge', label: 'ÂÖÖÈõªÁ∑ö' }, { id: 'check_3c_bank', label: 'Ë°åÂãïÈõªÊ∫ê' } ] },
            { id: 'personal', name: 'ÂÄã‰∫∫/Áõ•Ê¥ó', color: 'bg-[#dbe4d5] text-[#6b8063]', items: [ { id: 'check_item_rain', label: 'Èõ®ÂÖ∑' }, { id: 'check_item_coat', label: '‰øùÊöñË°£Áâ©' }, { id: 'check_item_wash', label: 'ÁâôÂà∑/Ê¥óÈù¢‰π≥' }, { id: 'check_item_meds', label: 'Â∏∏ÂÇôËó•' } ] }
        ],
        daily: [ { id: 'daily_charger', label: 'ÂÖÖÈõªÂô® / ËΩâÊé•È†≠' }, { id: 'daily_wash', label: 'Áõ•Ê¥óÂåÖ / ÁúºÈè°' }, { id: 'daily_wifi', label: 'Ë≠∑ÁÖß / Èö®Ë∫´Ë≤¥ÈáçÁâ©ÂìÅ' }, { id: 'daily_key', label: 'ÊàøÂç°Â∑≤Ê≠∏ÈÇÑ' } ],
        jp: [
            { jp: '„Åô„Åø„Åæ„Åõ„Çì', zh: '‰∏çÂ•ΩÊÑèÊÄù' }, 
            { jp: '„Éà„Ç§„É¨„ÅØ„Å©„Åì„Åß„Åô„Åã', zh: 'ÂªÅÊâÄÂú®Âì™Ë£°' },
            { jp: 'Âà•„ÄÖ„Å´ÂåÖ„Çì„Åß„Åè„Å†„Åï„ÅÑ', zh: 'Ë´ãÂàÜÈñãÂåÖË£ù' }, 
            { jp: 'ÂÖçÁ®é„Å´„Å™„Çä„Åæ„Åô„Åã', zh: 'ÂèØ‰ª•ÂÖçÁ®ÖÂóé?' },
            { jp: 'Ë¢ã„ÅØË¶Å„Çä„Åæ„Åõ„Çì', zh: '‰∏çÁî®Ë¢ãÂ≠ê' }, 
            { jp: 'Êñ∞„Åó„ÅÑ„ÅÆ„ÅØ„ÅÇ„Çä„Åæ„Åô„Åã', zh: 'ÊúâÊñ∞ÁöÑÂóé?' },
            { jp: '„Åì„Çå„Çí„Åè„Å†„Åï„ÅÑ', zh: 'ÊàëË¶ÅÈÄôÂÄã' }, 
            { jp: '„Ç´„Éº„Éâ„ÅØ‰Ωø„Åà„Åæ„Åô„Åã', zh: 'ÂèØ‰ª•Âà∑Âç°Âóé?' },
            { jp: '„É°„Éã„É•„Éº„Çí„Åè„Å†„Åï„ÅÑ', zh: 'Ë´ãÁµ¶ÊàëËèúÂñÆ' }, 
            { jp: '„ÅäÊ∞¥„Çí„Åè„Å†„Åï„ÅÑ', zh: 'Ë´ãÁµ¶ÊàëÊ∞¥' }, 
            { jp: '„Åä„Åô„Åô„ÇÅ„ÅØÔºü', zh: 'ÊúâÊé®Ëñ¶ÁöÑÂóé?' }, 
            { jp: '„Åä‰ºöË®à„Çí„ÅäÈ°ò„ÅÑ„Åó„Åæ„Åô', zh: 'È∫ªÁÖ©ÁµêÂ∏≥' }
        ]
    };

    const ATTRACTION_DETAILS = {
        "Êò•‰πãÈ´òÂ±±Á•≠ (Â±±ÁéãÁ•≠)": "Êò•‰πãÈ´òÂ±±Á•≠ÔºàSpring Takayama FestivalÔºâÔºåÂèàÁ®±ÁÇ∫Â±±ÁéãÁ•≠ÔºåÊòØÊó•Êú¨‰∏âÂ§ßÁæéÁ•≠‰πã‰∏ÄÔºåÊØèÂπ¥Âõ∫ÂÆöÊñº4Êúà14Êó•Ëàá15Êó•ËàâË°åÔºåÂÆ£ÂëäÈ£õÈ©íÈ´òÂ±±Êò•Â§©ÁöÑ‰æÜËá®„ÄÇ\n\n„ÄêÁ•≠ÂÖ∏ÁúãÈªû„Äë\n1. ËèØÈ∫óÂ±ãÂè∞ÔºöÁ•≠ÂÖ∏ÁöÑ‰∏ªËßíÊòØ12Â∫ßË¢´Ë≠ΩÁÇ∫„ÄåÊ¥ªÂãïÁöÑÈôΩÊòéÈñÄ„ÄçÁöÑÂ±ãÂè∞ÔºàËä±ËªäÔºâ„ÄÇÈÄô‰∫õÂ±ãÂè∞Ë£ùÈ£æËëóÁ≤æÁ∑ªÁöÑÈ£õÈ©íÊú®Èõï„ÄÅÊºÜÂô®ËàáÈáëÂ±¨È£æÂìÅÔºåÂ±ïÁèæ‰∫ÜÊ±üÊà∂ÊôÇ‰ª£Â∑•Âå†ÁöÑÈ´òË∂ÖÊäÄËóù„ÄÇ\n\n2. Ê©üÈóú‰∫∫ÂÅ∂Ë°®ÊºîÔºöÂÖ∂‰∏≠ÂπæÂ∫ßÂ±ãÂè∞‰∏äÊúâÁ≤æÂ∑ßÁöÑ„ÄåÊ©üÈóú‰∫∫ÂÅ∂ÔºàKarakuriÔºâ„ÄçÔºåÁî±Â§ö‰ΩçÊìçÂÅ∂Â∏´Âú®ÂÖßÈÉ®Á≤æÂØÜÊìçÊéßÔºå‰∫∫ÂÅ∂ËÉΩÂÅöÂá∫ËÆäËáâ„ÄÅÂØ´Â≠óÁ≠âÈ´òÈõ£Â∫¶Âãï‰ΩúÔºåÊ†©Ê†©Â¶ÇÁîüÔºåÊòØÂøÖÁúãÈáçÈªûÔºÅ\n\n3. Â§¢ÂπªÂ§úÁ•≠ÔºöËã•Â§©Ê∞£ÂÖÅË®±Ôºå14Êó•Êôö‰∏äÊúÉËàâË°åÂ§úÁ•≠„ÄÇÊØèÂ∫ßÂ±ãÂè∞Êéõ‰∏äÁ¥Ñ100ÁõûÁáàÁ±†ÔºåÂú®ÊºÜÈªëÁöÑÂè§ËÄÅË°óÈÅì‰∏≠Â∑°ÈÅäÔºåËàáÁôΩÂ§©ËèØÈ∫óÁá¶ÁàõÁöÑÊ∞õÂúçÊà™ÁÑ∂‰∏çÂêåÔºåÂÖÖÊªø‰∫ÜÂ§¢ÂπªËàáÁ•ûÁ•ïÊÑü„ÄÇ",
        "Á´ãÂ±±ÈªëÈÉ®Èõ™‰πãÂ§ßË∞∑": "Á´ãÂ±±ÈªëÈÉ®ÈòøÁàæÂçëÊñØË∑ØÁ∑öÔºåÊòØ‰∏ÄÊ¢ùÈÄ£Êé•ÂØåÂ±±Á∏£ËàáÈï∑ÈáéÁ∏£ÁöÑÂ£ØÈóäÂ±±Â≤≥ËßÄÂÖâË∑ØÁ∑ö„ÄÇÁÇ∫‰∫Ü‰øùË≠∑Ëá™ÁÑ∂Áí∞Â¢ÉÔºåÁßÅÂÆ∂ËªäÁ¶ÅÊ≠¢ÈÄ≤ÂÖ•ÔºåÊóÖÂÆ¢ÂøÖÈ†àÊèõ‰πòÂ§öÁ®ÆÁç®ÁâπÁöÑ‰∫§ÈÄöÂ∑•ÂÖ∑ÊâçËÉΩÊ©´Ë∂äÁæ§Â±±„ÄÇÈÄôË∂üÊóÖÁ®ãÊÇ®Â∞áÈ´îÈ©ó‰∫∫È°ûÂ∑•Á®ãËàáÂ§ßËá™ÁÑ∂Â•áÊôØÁöÑÁµêÂêà„ÄÇ\n\n„ÄêÂÖ≠Á®Æ‰∫§ÈÄöÂ∑•ÂÖ∑Â§ßËß£ÂØÜ„Äë\n1. Á´ãÂ±±ÁôªÂ±±Á∫úËªä (7ÂàÜÈêò)ÔºöÂæûÁ´ãÂ±±Á´ô‰∏ÄÂè£Ê∞£Áà¨Âçá500ÂÖ¨Â∞∫ÔºåÈÄ≤ÂÖ•Â±±Â≤≥Âú∞Â∏∂„ÄÇ\n\n2. Á´ãÂ±±È´òÂéüÂ∑¥Â£´ (50ÂàÜÈêò)ÔºöË°åÈßõÂú®Èõ™Â£Å‰πãÈñìÔºåÂâçÂæÄÊ®ôÈ´ò2450ÂÖ¨Â∞∫ÁöÑÂÆ§Â†ÇÔºå‰πüÂ∞±ÊòØËëóÂêçÁöÑ„ÄåÈõ™‰πãÂ§ßË∞∑„ÄçÊâÄÂú®Âú∞„ÄÇ\n\n3. Á´ãÂ±±ÈößÈÅìÁÑ°ËªåÈõªËªä (10ÂàÜÈêò)ÔºöÈÄôÊòØÂú®Êó•Êú¨Êµ∑ÊãîÊúÄÈ´òÁöÑÈößÈÅì‰∏≠Ë°åÈßõÁöÑÈõªËªäÔºåÂÖ®Á®ãÈÉΩÂú®Â±±Ê¥ûË£°„ÄÇ\n\n4. Á´ãÂ±±Êû∂Á©∫Á¥¢ÈÅì (7ÂàÜÈêò)ÔºöÁÑ°ÊîØÊü±ÂºèÁ∫úËªäÔºåÂÉèÁßªÂãïÁöÑÂ±ïÊúõÂè∞ÔºåÂèØ‰ª•360Â∫¶‰øØÁû∞ÈòøÁàæÂçëÊñØÂ±±ËÑàÂÖ®ÊôØ„ÄÇ\n\n5. ÈªëÈÉ®ÁôªÂ±±Á∫úËªä (5ÂàÜÈêò)ÔºöÁÇ∫‰∫Ü‰∏çÁ†¥Â£ûÊôØËßÄÔºåËøôÊòØÊó•Êú¨ÂîØ‰∏ÄÂÖ®Âú∞‰∏ãÂºèÁöÑÁ∫úËªä„ÄÇ\n\n6. ÈóúÈõªÈößÈÅìÈõªÊ∞£Â∑¥Â£´ (16ÂàÜÈêò)ÔºöÁ©øË∂äÁï∂Âπ¥Â∑•Á®ãÊúÄËâ±ÈâÖÁöÑÁ†¥Á¢éÂ∏∂ÔºåÊúÄÂæåÊäµÈÅîÊâáÊæ§„ÄÇ",
        "ÂêçËä±‰πãÈáå (Nabana no Sato)": "ÂêçËä±‰πãÈáåÔºàNabana no SatoÔºâ‰ΩçÊñº‰∏âÈáçÁ∏£Ê°ëÂêçÂ∏ÇÔºå‰ª•„ÄåÊó•Êú¨ÊúÄÂ§ßË¶èÊ®°ÁöÑÂ§úÈñìÁáàÈ£æ„ÄçËÅûÂêçÊñº‰∏ñ„ÄÇÈÄôË£°ÁöÑÈªûÁáàÊ¥ªÂãï‰∏çÂè™ÊòØÂñÆÁ¥îÁöÑÊéõÊéõÁáàÊ≥°ÔºåËÄåÊòØÂà©Áî®Êï∏ÁôæËê¨È°ÜLEDÁáàÁêÉÔºåÂú®Â§ßÂú∞‰∏äÊèèÁπ™Âá∫Â£ØËßÄÁöÑÂúñÁï´„ÄÇ\n\n„ÄêÂøÖÁúã‰∫ÆÈªû„Äë\n1. ÂÖâ‰πãÈößÈÅìÔºöÂÖ®Èï∑200ÂÖ¨Â∞∫ÁöÑÂÖâ‰πãËø¥ÂªäÔºåËµ∞Âú®ÈößÈÅì‰∏≠ÂΩ∑ÂΩøË¢´Ê∫´ÊöñÁöÑÂÖâËäíÂåÖÂúçÔºåÊòØÈÄôË£°ÊúÄÁ∂ìÂÖ∏ÁöÑÊâìÂç°Èªû„ÄÇ\n\n2. ‰∏ªÈ°åÁáàÈ£æÂçÄÔºöÊØèÂπ¥ÊúÉÊúâ‰∏çÂêåÁöÑ‰∏ªÈ°åÔºàÂ¶ÇÁÜäÊú¨ÁÜä„ÄÅÈòøÁàæÂçëÊñØÂ±±ÁöÑÂ∞ëÂ•≥Á≠âÔºâÔºåÂà©Áî®ÁáàÂÖâÂú®Âª£Â§ßÁöÑÊñúÂù°‰∏äÊºîÂá∫ÂãïÊÖãÁöÑÊïÖ‰∫ã„ÄÇ\n\n3. Ê∞¥‰∏äÁáàÈ£æÔºöÂà©Áî®ÂØ¨Âª£ÁöÑÊ∞¥Èù¢ÂèçÂ∞ÑÂÖâÂΩ±ÔºåÂâµÈÄ†Âá∫Â¶ÇÂêåÊ•µÂÖâËà¨Â§¢ÂπªÁöÑËâ≤ÂΩ©ËÆäÂåñ„ÄÇ\n\nÂª∫Ë≠∞ÊÇ®ÂÇçÊôöÂÖ•Â†¥ÔºåÂÖàÊ¨£Ë≥ûÁôΩÂ§©ÁöÑËä±ÂúíÁæéÊôØÔºàÂ¶ÇÈ¨±ÈáëÈ¶ôÔºâÔºåÈö®ËëóÂ§úÂπï‰ΩéÂûÇÔºåË¶ãË≠âÁáàÂÖâÁû¨Èñì‰∫ÆËµ∑ÁöÑÊÑüÂãïÊôÇÂàª„ÄÇ",
        "ÂêâÂçúÂäõÂÖ¨Âúí Ghibli Park": "ÂêâÂçúÂäõÂÖ¨Âúí‰ΩçÊñºÊÑõÁü•Á∏£ÔºåÊòØÂ∞áÂéüÊú¨ÁöÑ„ÄåÊÑõ„ÉªÂú∞ÁêÉÂçöÁ¥ÄÂøµÂÖ¨Âúí„ÄçÈáçÊñ∞Ë¶èÂäÉÔºåËÆìÂÆÆÂ¥éÈßøÁ≠Ü‰∏ãÁöÑÂ•áÂπª‰∏ñÁïåÁúüÂØ¶ÈáçÁèæ„ÄÇÈÄôË£°Ëàá‰∏ÄËà¨‰∏ªÈ°åÊ®ÇÂúíÊúÄÂ§ßÁöÑ‰∏çÂêåÊòØ‚Äî‚ÄîÊ≤íÊúâÂ§ßÂûãÈõ≤ÈúÑÈ£õËªäÔºåÊ≤íÊúâ‰∫∫ÂÅ∂Ë£ùË°®ÊºîÔºå‰∏ªÊâì„ÄåÊï£Ê≠•„ÄÅÁôºÁèæ„ÄÅÊÑüÂèó„Äç„ÄÇ\n\n„Äê‰∏ªË¶ÅÂçÄÂüü„Äë\n1. ÂêâÂçúÂäõÂ§ßÂÄâÂ∫´ÔºöÈÄôÊòØÂÆ§ÂÖßÂûãÁöÑÂ§ßÂ±ïË¶ΩÈ§®ÔºåÊî∂Ëóè‰∫ÜÂêâÂçúÂäõ‰ΩúÂìÅÁöÑÁßòÂØÜ„ÄÇÊÇ®ÂèØ‰ª•Âú®ÈÄôË£°Ëàá„ÄäÁ•ûÈö±Â∞ëÂ•≥„ÄãÁöÑÁÑ°ËáâÁî∑ÂêàÁÖßÔºåÊàñÊòØÁúãÂà∞„ÄäÂ§©Á©∫‰πãÂüé„ÄãÂ∑®Â§ßÁöÑÊ©üÂô®‰∫∫ÂÖµ„ÄÇ\n\n2. ÈùíÊò•‰πã‰∏òÔºöÈáçÁèæ‰∫Ü„ÄäÂøÉ‰πãË∞∑„Äã‰∏≠ÁöÑÂè§Ëë£Â∫ó„ÄåÂú∞ÁêÉÂ±ã„ÄçÔºåÁ´ôÂú®È´òËôïÂèØ‰ª•‰øØÁû∞ÂúíÂçÄ„ÄÇ\n\n3. Dondoko‰πãÊ£ÆÔºö‰ª•„ÄäÈæçË≤ì„ÄãÁÇ∫‰∏ªÈ°åÔºåÁ©øÈÅéÊ£ÆÊûóÊ≠•ÈÅìÂæåÔºåÊúÉÁúãÂà∞Â∞èÊúàÂíåÂ∞èÊ¢ÖÁöÑÂÆ∂„ÄÇ\n\nÈÄôË£°ÁöÑÊØèÂÄãËßíËêΩÈÉΩËóèËëóÁ¥∞ÁØÄÔºåË´ãÊîæÊÖ¢ËÖ≥Ê≠•ÔºåÂú®Ê£ÆÊûóËàáÂæÆÈ¢®‰∏≠Â∞ãÊâæÂ±¨ÊñºÊÇ®ÁöÑÁ´•Ë©±ÂõûÊÜ∂ÂêßÔºÅ",
        "È£õÈ©íÂè§Â∑ù ÁÄ®Êà∂Â∑ùÈØâÈ≠ö": "È£õÈ©íÂè§Â∑ùÔºàHida FurukawaÔºâÊòØ‰∏ÄÂÄãÊØîÈ´òÂ±±Êõ¥ÂØßÈùú„ÄÅÊõ¥ÂÖ∑ÁîüÊ¥ªÊÑüÁöÑÂè§ËÄÅÂ∞èÈéÆÔºåÂõ†ÂãïÁï´ÈõªÂΩ±„Ää‰Ω†ÁöÑÂêçÂ≠ó„ÄãÂú®Ê≠§ÂèñÊôØËÄåËÅ≤ÂêçÂ§ßÂô™„ÄÇ\n\n„ÄêÂøÖÁúã‰∫ÆÈªû„Äë\n1. ÁôΩÂ£ÅÂúüËóèË°óËàáÁÄ®Êà∂Â∑ùÔºöÈÄôÊòØÂè§Â∑ùÊúÄÁ∂ìÂÖ∏ÁöÑÁï´Èù¢„ÄÇÊ≤øËëóÊ∏ÖÊæàÁöÑÁÄ®Êà∂Â∑ùÔºåÊéíÂàóËëó‰∏ÄÊï¥ÊéíÁôΩÁâÜÈªëÁì¶ÁöÑÂÇ≥Áµ±ÂÄâÂ∫´ÔºàÂúüËóèÔºâ„ÄÇÂ∑ùË£°Ê∏∏Ëëó‰∏äÂçÉÊ¢ùËâ≤ÂΩ©ÊñëÊñïÁöÑÈå¶ÈØâÔºåÊÇ®ÂèØ‰ª•Ë≥ºË≤∑È≠öÈ£ºÊñôÈ§µÈ£üÔºåÊÑüÂèóÊÇ†ÈñíÁöÑÂçàÂæåÊôÇÂÖâ„ÄÇ\n\n2. „Ää‰Ω†ÁöÑÂêçÂ≠ó„ÄãËÅñÂú∞Â∑°Á¶ÆÔºö\n- È£õÈ©íÂè§Â∑ùËªäÁ´ôÔºöÈõªÂΩ±‰∏≠ÁÄßÂ∞ãÊâæ‰∏âËëâÊôÇÂá∫ÁèæÁöÑËªäÁ´ôÂ†¥ÊôØÔºå‰∏ÄÂÆöË¶ÅÂú®Â§©Ê©ã‰∏äÊãç‰∏ÄÂºµÂàóËªäÈÄ≤Á´ôÁöÑÁï´Èù¢„ÄÇ\n- È£õÈ©íÂ∏ÇÂúñÊõ∏È§®ÔºöÁÄßÂú®Ê≠§Êü•Èñ±ÈóúÊñºÁ≥∏ÂÆàÁî∫ÁöÑË≥áÊñô„ÄÇ\n- Ê∞£Â§öËã•ÂÆÆÁ•ûÁ§æÔºöÈõªÂΩ±‰∏≠ÂÆÆÊ∞¥Á•ûÁ§æÁöÑÂéüÂûã‰πã‰∏Ä„ÄÇ\n\nÈÄôË£°Ê≤íÊúâÈ´òÂ±±ËÄÅË°óÁöÑÊìÅÊì†ÂñßÂõÇÔºåÂ§ö‰∫Ü‰∏Ä‰ªΩÂ±¨ÊñºÈ£õÈ©íÂ±±ÂüéÁöÑÈùúË¨êËàáÂÑ™ÈõÖ„ÄÇ",
        "Êñ∞Á©óÈ´òÈõôÂ±§Á∫úËªä": "Êñ∞Á©óÈ´òÈ´òÁ©∫Á∫úËªäÔºàShinhotaka RopewayÔºâÊòØÊó•Êú¨ÂîØ‰∏ÄÁöÑÈõôÂ±§Á∫úËªäÔºåÂ∏∂ÊÇ®Áõ¥ÈÅîÊ®ôÈ´ò2156ÂÖ¨Â∞∫ÁöÑÈõ≤Á´Ø‰∏ñÁïåÔºåËºïÈ¨ÜÈ£ΩË¶ΩÂåóÈòøÁàæÂçëÊñØÂ±±ÁöÑÂ£ØÈ∫óÂÖ®ÊôØ„ÄÇ\n\n„ÄêÁ©∫‰∏≠Êº´Ê≠•È´îÈ©ó„Äë\nÁ∫úËªäÂàÜÁÇ∫ÂÖ©ÊÆµÔºåÁ¨¨‰∏ÄÊÆµÂæûÊñ∞Á©óÈ´òÊ∫´Ê≥âÁ´ôÂà∞ÈçãÂπ≥È´òÂéüÁ´ôÔºåÁ¨¨‰∫åÊÆµÂâáÊòØËëóÂêçÁöÑÈõôÂ±§Á∫úËªäÔºåÁõ¥ÈÅîË•øÁ©óÈ´òÂè£Á´ô„ÄÇÈö®ËëóÁ∫úËªäÁ∑©Á∑©Áà¨ÂçáÔºåÂéüÊú¨‰ª∞ÊúõÁöÑÁæ§Â±±ÈÄêÊº∏ËÆäÁÇ∫Âπ≥Ë¶ñÔºåÊúÄÂæåÂ∞áÊï¥ÂÄãÊßç‰πãÂ≤≥„ÄÅÁ©óÈ´òÈÄ£Â≥∞Ë∏©Âú®ËÖ≥‰∏ã„ÄÇ\n\n„ÄêÂ±±È†ÇÂ±ïÊúõÂè∞„Äë\nË•øÁ©óÈ´òÂè£Á´ôÈ†ÇÊ®ìÁöÑÂ±ïÊúõÂè∞Ê¶ÆÁç≤„ÄäÁ±≥ÂÖ∂ÊûóÁ∂†Ëâ≤ÊåáÂçó„Äã‰∫åÊòüË©ïÂÉπ„ÄÇÂú®ÈÄôË£°ÔºåÊÇ®ÂèØ‰ª•360Â∫¶ÁÑ°Ê≠ªËßíÂú∞Ê¨£Ë≥ûÁ∂øÂª∂ÁöÑÈõ™Â≥∞ËàáÈõ≤Êµ∑„ÄÇÂ¶ÇÊûúÂú®ÂÜ¨Â≠£ÊàñÊò•ÂàùÂâçÂæÄÔºåÈÇÑËÉΩÈ´îÈ©óÂú®ÊØî‰∫∫ÈÇÑÈ´òÁöÑ„ÄåÈõ™‰πãËø¥Âªä„Äç‰∏≠Êï£Ê≠•ÁöÑÊ®ÇË∂£„ÄÇ",
        "Èõ®Êô¥Êµ∑Â≤∏": "Èõ®Êô¥Êµ∑Â≤∏ÔºàAmaharashi CoastÔºâË¢´ÈÅ∏ÁÇ∫„ÄåÊó•Êú¨Êµ∑Êø±ÁôæÈÅ∏„Äç‰πã‰∏ÄÔºå‰ΩçÊñºÂØåÂ±±Á∏£È´òÂ≤°Â∏Ç„ÄÇÈÄôË£°ÊìÅÊúâ‰∏ñÁïå‰∏äÊ•µÁÇ∫ÁΩïË¶ãÁöÑÂ•áÊôØ‚Äî‚Äî„ÄåÈöîËëóÊµ∑Ê¥ãÁú∫Êúõ3000ÂÖ¨Â∞∫Á¥öÁöÑÈ´òÂ±±„Äç„ÄÇ\n\n„ÄêÁµïÊôØÊßãÂúñ„Äë\nÂ§©Ê∞£Êô¥ÊúóÊôÇÔºåÊÇ®ÂèØ‰ª•Á´ôÂú®Êµ∑ÈÇäÔºåÁúãËëóÊπõËóçÁöÑÂØåÂ±±ÁÅ£ÔºåËÄåÊµ∑Âπ≥Èù¢ÁöÑÂ∞çÂ≤∏Á´üÁÑ∂ÁüóÁ´ãËëóÁµÇÂπ¥Á©çÈõ™ÁöÑÁ´ãÂ±±ÈÄ£Â≥∞ÔºÅÂâçÊôØËëóÂêçÁöÑ„ÄåÂ•≥Â≤©„ÄçËàáÂæåÊñπÈõÑÂÅâÁöÑÈõ™Â±±Áõ∏‰∫íËºùÊò†ÔºåÂΩ∑ÂΩø‰∏ÄÂπÖÊΩëÂ¢®Â±±Ê∞¥Áï´„ÄÇ\n\n„ÄêÁæ©Á∂ìÂ≤©ÂÇ≥Ë™™„Äë\nÊµ∑Â≤∏ÈÇäÊúâ‰∏ÄÂ°äÂ∑®Â§ßÁöÑÂ≤©Áü≥Âè´ÂÅö„ÄåÁæ©Á∂ìÂ≤©„Äç„ÄÇÂÇ≥Ë™™Ê∫êÁæ©Á∂ìÂú®Ë¢´Âì•Âì•Ê∫êË≥¥ÊúùËøΩÊÆ∫ÈÄÉ‰∫°Ëá≥ÂåóÈô∏ÊôÇÔºåÊõæÂú®Ê≠§Â≤©Áü≥‰∏ãË∫≤ÈÅøÈ©üÈõ®Á≠âÂæÖÂ§©Êô¥ÔºåÈÄô‰πüÊòØ„ÄåÈõ®Êô¥„ÄçÂú∞ÂêçÁöÑÁî±‰æÜ„ÄÇ",
        "Â§ßÈ†àËßÄÈü≥ & ÂïÜÂ∫óË°ó": "Â§ßÈ†àËßÄÈü≥ÔºàOsu KannonÔºâÊòØÊó•Êú¨‰∏âÂ§ßËßÄÈü≥‰πã‰∏ÄÔºåÈ¶ôÁÅ´ÈºéÁõõ„ÄÇËÄåÁ∑äÈÑ∞ÁöÑ„ÄåÂ§ßÈ†àÂïÜÂ∫óË°ó„ÄçÊõ¥ÊòØÂêçÂè§Â±ãÊúÄÁÜ±È¨ßÁöÑË≥ºÁâ©ÂçÄÔºåÊúâË∂ÖÈÅé1200ÂÆ∂Â∫óÈã™„ÄÇ\n\n„ÄêÂïÜÂ∫óË°óÁâπËâ≤„Äë\n1. Áï∞ÂúãÈ¢®ÊÉÖÔºöÈÄôË£°Êúâ‰æÜËá™‰∏ñÁïåÂêÑÂúãÁöÑÁæéÈ£üÔºåÂ¶ÇÂè∞ÁÅ£ÁÇ∏Èõû„ÄÅÂúüËÄ≥ÂÖ∂ÁÉ§ËÇâ„ÄÅÂ∑¥Ë•øÁÉ§ÈõûÁ≠â„ÄÇ\n2. Âè§ËëóËàáÊ¨°ÊñáÂåñÔºöÂ§ßÈ†à‰πüË¢´Á®±ÁÇ∫„ÄåÂêçÂè§Â±ãÁöÑÁßãËëâÂéü„ÄçÔºåÊúâË®±Â§öÂãïÊº´Âë®ÈÇä„ÄÅÂ•≥ÂÉïÂíñÂï°Âª≥‰ª•ÂèäÈ¢®Ê†ºÁç®ÁâπÁöÑ‰∫åÊâãË°£Â∫ó„ÄÇ\n3. ÂøÖÂêÉÁæéÈ£üÔºöÁÇ∏È•ÖÈ†≠„ÄÅÈØõÈ≠öÁáí„ÄÅÁ≥∞Â≠êÁ≠âÈÇäËµ∞ÈÇäÂêÉÁöÑÈäÖÊùøÁæéÈ£ü„ÄÇ",
        "Á∂†Ê¥≤21 & ÈõªË¶ñÂ°î": "Á∂†Ê¥≤21ÔºàOasis 21ÔºâÊòØÂêçÂè§Â±ãÁöÑÂú∞Ê®ôÂª∫ÁØâÔºåÊúÄÂê∏ÁùõÁöÑÊòØÈ†ÇÂ±§ÁöÑ„ÄåÊ∞¥ÁöÑÂÆáÂÆôËàπ„Äç„ÄÇ\n\n„ÄêÊ∞¥ÁöÑÂÆáÂÆôËàπ„Äë\nÈÄôÊòØ‰∏ÄÂÄãÂ∑®Â§ßÁöÑÊ©¢ÂúìÂΩ¢ÁéªÁíÉÂ±ãÈ†ÇÔºå‰∏äÈù¢Èã™Êªø‰∫ÜÊµÅÂãïÁöÑÊ∞¥ÔºåÂú®ÈôΩÂÖâÁÖßÂ∞Ñ‰∏ãÊ≥¢ÂÖâÁ≤ºÁ≤º„ÄÇÊôö‰∏äÈªûÁáàÂæåÔºåÈÖçÂêàÊóÅÈÇäÁöÑÂêçÂè§Â±ãÈõªË¶ñÂ°îÔºà‰∏≠ÈÉ®ÈõªÂäõ MIRAI TOWERÔºâÔºåÂëàÁèæÂá∫Ê•µÂÖ∑Êú™‰æÜÊÑüÁöÑÂ§úÊôØ„ÄÇ\n\nÊÇ®ÂèØ‰ª•ÂÖçË≤ªËµ∞‰∏äÁéªÁíÉÂ±ãÈ†ÇÊï£Ê≠•ÔºåÊòØÊãçÊîùÂêçÂè§Â±ãÂ§úÊôØÁöÑÊúÄ‰Ω≥Âú∞Èªû„ÄÇ",
        "È¶¨Á±†ÂÆø Magome-juku": "È¶¨Á±†ÂÆøÊòØÊ±üÊà∂ÊôÇ‰ª£ÈÄ£Êé•Êù±‰∫¨Ëàá‰∫¨ÈÉΩÁöÑ„Äå‰∏≠Â±±ÈÅì„Äç‰∏äÁöÑÁ¨¨43ÂÄãÂÆøÂ†¥Áî∫ÔºàÈ©õÁ´ôÔºâ„ÄÇ\n\n„ÄêÁü≥ÊùøÂù°ÈÅì„Äë\nËàáÂÖ∂‰ªñÂÆøÂ†¥‰∏çÂêåÔºåÈ¶¨Á±†ÂÆøÊòØÊ≤øËëóÈô°Â≥≠ÁöÑÂ±±Âù°ËÄåÂª∫„ÄÇËµ∞Âú®ËúøËúíÁöÑÁü≥ÊùøË∑Ø‰∏äÔºåÂÖ©ÊóÅÊòØ‰øùÁïôÂÆåÊï¥ÁöÑÊ±üÊà∂ÊôÇ‰ª£Êú®ÈÄ†Âª∫ÁØâÔºåÂΩ∑ÂΩøÁ©øË∂äÊôÇÁ©∫„ÄÇ\n\n„ÄêÂøÖÂêÉÔºö‰∫îÂπ≥È§Ö„Äë\nÈÄôÊòØ‰∏ÄÁ®ÆÂ∞áÁ±≥È£ØÊêóÁ¢éÂæåË£πÂú®Êú®‰∏≤‰∏äÔºåÂ°ó‰∏äÊ†∏Ê°ÉÂë≥ÂôåÈÜ¨ÁÇ≠ÁÉ§ÁöÑÈÑâÂúüÊñôÁêÜÔºåÈ¶ôÊ∞£Êí≤Èºª„ÄÇ",
        "Â¶ªÁ±†ÂÆø Tsumago-juku": "Â¶ªÁ±†ÂÆøÊòØÊó•Êú¨Á¨¨‰∏ÄÂÄã„ÄåÈáçË¶ÅÂÇ≥Áµ±Âª∫ÈÄ†Áâ©Áæ§‰øùÂ≠òÂú∞ÂçÄ„Äç„ÄÇÁï∂Âú∞ÁöÑÂ±ÖÊ∞ëÁôºËµ∑‰∫Ü„Äå‰∏çË≥£„ÄÅ‰∏çÁßü„ÄÅ‰∏çÊãÜ„ÄçÁöÑÈÅãÂãïÔºåÊâçÂæó‰ª•Â∞áÈÄô‰ªΩÁèçË≤¥ÁöÑÈÅ∫Áî¢ÂÆåÊï¥‰øùÁïô‰∏ã‰æÜ„ÄÇ\n\n„ÄêÂéüÊ±ÅÂéüÂë≥„Äë\nÁõ∏ÊØîÈ¶¨Á±†ÂÆøÔºåÈÄôË£°Êõ¥È°ØË≥™Ê®∏ËàáÂØßÈùú„ÄÇÈÄôË£°ÂÆåÂÖ®Áúã‰∏çÂà∞ÈõªÁ∑öÊ°øÂíåÁèæ‰ª£ÊãõÁâåÔºåÂÆåÊï¥ÈáçÁèæ‰∫ÜÂπæÁôæÂπ¥ÂâçÊ±üÊà∂ÊôÇ‰ª£ÁöÑË°óÈÅìÈ¢®Ë≤å„ÄÇÂª∫Ë≠∞ÂèØ‰ª•ÂèÉËßÄ„ÄåËÑáÊú¨Èô£Â•ßË∞∑„ÄçÔºåÊÑüÂèóÁï∂Âπ¥Â§ßÂêçÔºàË´∏‰æØÔºâ‰ΩèÂÆøÁöÑÂ•¢ËèØ„ÄÇ",
        "ÂúãÂØ∂ ÊùæÊú¨Âüé": "ÊùæÊú¨ÂüéÊòØÊó•Êú¨ÁèæÂ≠òÊúÄÂè§ËÄÅÁöÑ‰∫îÈáçÂÖ≠ÈöéÊú®ÈÄ†Â§©ÂÆàÈñ£ÔºåËàáÂß¨Ë∑ØÂüé„ÄÅÂΩ•Ê†πÂüéÁ≠â‰∏¶ÂàóÁÇ∫Êó•Êú¨ÂúãÂØ∂„ÄÇ\n\n„ÄêÁÉèÂüé‰πãÁæé„Äë\n‰∏çÂêåÊñºÂß¨Ë∑ØÂüéÁöÑÁôΩËâ≤ÔºåÊùæÊú¨ÂüéÁöÑÂ§ñÁâÜÂ°óÊªø‰∫ÜÈªëÊºÜÔºåÂõ†Ê≠§Ë¢´Á®±ÁÇ∫„ÄåÁÉèÂüé„Äç„ÄÇÈªëËâ≤ÁöÑÂüéÂ†°Âú®ÂåóÈòøÁàæÂçëÊñØÈõ™Â±±ÁöÑÊò†Ë•Ø‰∏ãÔºåÈ°ØÂæóÊ†ºÂ§ñËéäÂö¥ËÇÖÁ©Ü„ÄÇ\n\n„ÄêÂª∫ÁØâÁâπËâ≤„Äë\nÂ§©ÂÆàÈñ£ÂÖßÈÉ®‰øùÁïô‰∫ÜÊà∞ÂúãÊôÇ‰ª£ÁöÑÁµêÊßãÔºåÊ®ìÊ¢ØÈùûÂ∏∏Èô°Â≥≠ÔºàÊúÄÂ§ßÊñúÂ∫¶Á¥Ñ61Â∫¶ÔºâÔºåÊîÄÁà¨ÊôÇË´ãÂãôÂøÖÂ∞èÂøÉ„ÄÇ",
        "Êò•‰πãÂõõÈáçÂ•è (ÊúùÊó•Áî∫)": "Êò•‰πãÂõõÈáçÂ•èÔºàSpring QuartetÔºâÊòØÂØåÂ±±Á∏£ÊúùÊó•Áî∫Êò•Â≠£ÈôêÂÆöÁöÑÁµïÊôØ„ÄÇ\n\n„ÄêÂõõÈáçÂ•èÁöÑÁµÑÊàê„Äë\n1. ÁôΩËâ≤ÁöÑÂåóÈòøÁàæÂçëÊñØÊÆòÈõ™ÔºàËÉåÊôØÔºâ\n2. Á≤âÁ¥ÖËâ≤ÁöÑËàüÂ∑ùÊ´ªËä±Êûó\n3. ÈÆÆÈªÉËâ≤ÁöÑÊ≤πËèúËä±Áî∞\n4. Á¥ÖËâ≤ÁöÑÈ¨±ÈáëÈ¶ôËä±Áî∞\n\nÈÄôÂõõÁ®ÆËâ≤ÂΩ©Âú®Âêå‰∏ÄÂÄãÁï´Èù¢‰∏≠Á∂ªÊîæÔºåÊòØÂ§ßËá™ÁÑ∂ÊúÄÁæéÁöÑÂçîÂ•èÊõ≤„ÄÇÊúÄ‰Ω≥ËßÄË≥ûÊúüÈÄöÂ∏∏Âú®4Êúà‰∏äÊó¨Ëá≥‰∏≠Êó¨„ÄÇ",
        "ÂêçÂè§Â±ãÂüé (Â§ñÂúçÊãçÁÖß)": "ÂêçÂè§Â±ãÂüéÁî±Âæ∑Â∑ùÂÆ∂Â∫∑‰∏ã‰ª§Âª∫ÈÄ†ÔºåÊòØÊó•Êú¨‰∏âÂ§ßÂêçÂüé‰πã‰∏Ä„ÄÇ\n\n„ÄêÈáëÈØ±„Äë\nÂ§©ÂÆàÈñ£Â±ãÈ†Ç‰∏äÊúâ‰∏ÄÂ∞çÈáëËâ≤ÁöÑ„ÄåÈØ±ÔºàShachihokoÔºâ„ÄçÔºåÊòØÂêçÂè§Â±ãÁöÑË±°ÂæµÔºå‰ª£Ë°®ËëóÂæ∑Â∑ùÂÆ∂ÁöÑÂ®ÅÂö¥„ÄÇ\n\n„ÄêÊú¨‰∏∏Âæ°ÊÆø„Äë\nÈõñÁÑ∂Â§©ÂÆàÈñ£ÁõÆÂâçÂõ†ËÄêÈúáÂ∑•Á®ãÈóúÈñâ‰∏≠ÔºàÂèØËÉΩÂÉÖËÉΩÂ§ñËßÄÊãçÁÖßÔºâÔºå‰ΩÜ‰øÆÂæ©ÂÆåÊàêÁöÑ„ÄåÊú¨‰∏∏Âæ°ÊÆø„ÄçÂÖßÈÉ®ÈáëÁ¢ßËºùÁÖåÔºåÂ±èÈ¢®Â£ÅÁï´Ê•µÁõ°Â•¢ËèØÔºåÈùûÂ∏∏ÂÄºÂæóÂÖ•ÂÖßÂèÉËßÄ„ÄÇ"
    };

    // ---------------------------------------------------------
    // 2. HELPER FUNCTIONS
    // ---------------------------------------------------------
    function initDynamicPadding() {
        const header = document.getElementById('header');
        const main = document.getElementById('main-container');
        if(header && main) {
            const h = header.offsetHeight;
            main.style.paddingTop = (h + 20) + 'px';
        }
    }
    
    // Switch UI - Moved here to ensure it's defined
    function switchTab(tabName) {
        if(tabName === 'itinerary') renderItinerary();
        else if(tabName === 'hotels') renderHotels();
        else if(tabName === 'drive') renderDrive();
        else if(tabName === 'tools') renderTools();
        
        ['itinerary', 'hotels', 'drive', 'tools'].forEach(t => {
            const btn = document.getElementById('nav-'+t);
            if(t === tabName) btn.classList.add('active');
            else btn.classList.remove('active');
        });
        
        // Hide/Show Date Selector
        const daySelector = document.getElementById('day-selector');
        if (tabName === 'itinerary') {
            daySelector.classList.remove('hidden');
            daySelector.classList.add('flex');
            document.getElementById('header').classList.add('pb-2');
            document.getElementById('header').classList.remove('pb-6');
        } else {
            daySelector.classList.add('hidden');
            daySelector.classList.remove('flex');
            document.getElementById('header').classList.remove('pb-2');
            document.getElementById('header').classList.add('pb-6');
        }

        window.scrollTo(0,0);
    }
    
    function getIcon(t) { 
        if(t==='FLIGHT') return 'plane'; 
        if(t==='CAR'||t==='DRIVE') return 'car'; 
        if(t==='FOOD') return 'utensils'; 
        if(t==='STAY') return 'bed-double'; 
        if(t==='SHOP') return 'shopping-bag'; 
        return 'map-pin'; 
    }

    function getIntVal(id, def = 1) {
        const el = document.getElementById(id);
        const val = el ? el.value : null;
        return val ? parseInt(val) : def;
    }

    // --- Weather Helpers ---
    async function fetchDayWeather(day) {
        const el = document.getElementById('day-weather');
        if(!el) return;
        try {
            const res = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${day.lat}&longitude=${day.lon}&daily=precipitation_probability_max,temperature_2m_max,temperature_2m_min,uv_index_max,weather_code&timezone=Asia%2FTokyo&forecast_days=1`);
            const d = await res.json();
            
            let aqi = '-';
            try {
                const aqiRes = await fetch(`https://air-quality-api.open-meteo.com/v1/air-quality?latitude=${day.lat}&longitude=${day.lon}&daily=us_aqi_max&timezone=Asia%2FTokyo&forecast_days=1`);
                const aqiData = await aqiRes.json();
                if(aqiData.daily && aqiData.daily.us_aqi_max) aqi = aqiData.daily.us_aqi_max[0];
            } catch(e){}

            if(d.daily) {
                const max = Math.round(d.daily.temperature_2m_max[0]);
                const min = Math.round(d.daily.temperature_2m_min[0]);
                const rain = d.daily.precipitation_probability_max[0];
                const code = d.daily.weather_code[0];

                let wIcon = '<i data-lucide="sun" class="w-8 h-8 text-orange-400"></i>';
                if(code>3) wIcon = '<i data-lucide="cloud" class="w-8 h-8 text-stone-400"></i>';
                if(code>=51) wIcon = '<i data-lucide="cloud-rain" class="w-8 h-8 text-blue-400"></i>';

                el.innerHTML = `
                    <div class="flex items-center justify-end gap-3">
                        <div class="text-right">
                            <div class="text-xl font-bold text-stone-800 leading-none">${max}¬∞ <span class="text-sm text-stone-400 font-normal">/ ${min}¬∞</span></div>
                            <div class="flex items-center justify-end gap-2 mt-1 text-[10px] text-stone-500">
                                <span><i data-lucide="umbrella" class="w-3 h-3 inline"></i> ${rain}%</span>
                                <span>AQI ${aqi}</span>
                            </div>
                        </div>
                        ${wIcon}
                    </div>
                `;
                lucide.createIcons();
            }
        } catch(e) {
            el.innerHTML = '<span class="text-xs text-stone-300">Weather Unavailable</span>';
        }
    }
    
    function fetchLocalWeather() {
        const tempEl = document.getElementById('local-temp');
        if(!tempEl) return;
        if(navigator.geolocation) {
            tempEl.innerText = '...';
            navigator.geolocation.getCurrentPosition(async p => {
                try {
                    const res = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${p.coords.latitude}&longitude=${p.coords.longitude}&current=temperature_2m&timezone=auto`);
                    const d = await res.json();
                    if(d.current) tempEl.innerText = Math.round(d.current.temperature_2m) + '¬∞';
                } catch(e) { tempEl.innerText = '--'; }
            }, () => tempEl.innerText = '--');
        }
    }

    // --- Currency Logic ---
    let currentRate = 0.22;
    async function fetchRate() {
        try {
            const res = await fetch('https://api.exchangerate-api.com/v4/latest/JPY');
            const data = await res.json();
            if(data.rates.TWD) {
                currentRate = data.rates.TWD;
                // Only try to update UI if element exists (Tools tab is active)
                const rateDisplay = document.getElementById('calc-rate-display');
                if(rateDisplay) {
                    rateDisplay.innerText = currentRate.toFixed(3);
                    renderBudget();
                    convertCurrency();
                }
            }
        } catch(e){ console.log("Rate Fetch Error", e); }
    }
    
    function convertCurrency() {
        const jpyInput = document.getElementById('jpy-input');
        const twdOutput = document.getElementById('twd-output');
        if(jpyInput && twdOutput) {
            const val = jpyInput.value;
            twdOutput.innerText = val ? Math.round(val * currentRate).toLocaleString() : 0;
        }
    }

    // --- Budget / Batch Logic ---
    let budgetItems = JSON.parse(localStorage.getItem('trip_budget') || '[]');
    let batchItems = []; 

    function renderBudget() {
        const list = document.getElementById('budget-list');
        if(!list) return; // Exit if tools tab not active
        
        list.innerHTML = ''; 
        let total = 0;
        budgetItems.forEach((item, index) => {
            const qty = item.qty || 1;
            const rowTotal = item.price * qty;
            total += rowTotal;
            list.innerHTML += `<li class="flex justify-between items-center border-b border-gray-50 dark:border-gray-700 pb-1">
                <span class="text-gray-600 dark:text-gray-300">${item.name} <span class="text-xs text-gray-400">x${qty}</span></span>
                <div class="flex items-center gap-2">
                    <span class="font-medium text-gray-800 dark:text-gray-200">¬•${rowTotal.toLocaleString()}</span>
                    <button onclick="deleteItem(${index})" class="text-gray-300 hover:text-red-400"><i data-lucide="trash-2" class="w-3 h-3"></i></button>
                </div>
            </li>`;
        });
        
        const totalJpy = document.getElementById('total-jpy');
        const totalTwd = document.getElementById('total-twd');
        if(totalJpy) totalJpy.innerText = '¬•' + total.toLocaleString();
        if(totalTwd) totalTwd.innerText = '‚âà NT$ ' + Math.round(total * currentRate).toLocaleString();
        
        try { localStorage.setItem('trip_budget', JSON.stringify(budgetItems)); } catch(e) {}
        lucide.createIcons();
    }

    function addItem() {
        const name = document.getElementById('budget-name').value;
        const price = parseInt(document.getElementById('budget-price').value);
        const qty = getIntVal('budget-qty', 1);
        if (name && price) { 
            budgetItems.push({ name, price, qty }); 
            document.getElementById('budget-name').value = ''; 
            document.getElementById('budget-price').value = ''; 
            document.getElementById('budget-qty').value = '1'; 
            renderBudget(); 
        }
    }
    
    function deleteItem(idx) { budgetItems.splice(idx, 1); renderBudget(); }
    function resetBudget() { if(confirm('Ê∏ÖÁ©∫Ë®òÂ∏≥Ôºü')) { budgetItems = []; renderBudget(); } }

    // Batch specific
    function addBatchItem() {
        const name = document.getElementById('batch-name').value;
        const price = parseInt(document.getElementById('batch-price').value);
        const qty = getIntVal('batch-qty', 1);
        if(name && price) {
            batchItems.push({name, price, qty});
            document.getElementById('batch-name').value = '';
            document.getElementById('batch-price').value = '';
            document.getElementById('batch-qty').value = '1';
            renderBatch();
        }
    }
    
    function renderBatch() {
        const list = document.getElementById('batch-list');
        if(!list) return;
        
        const total = batchItems.reduce((a, b) => a + (b.price * b.qty), 0);
        list.classList.remove('hidden');
        list.innerHTML = batchItems.map((i, idx) => `
            <div class="flex justify-between text-xs text-stone-600 mb-1 border-b border-stone-100 pb-1">
                <span>${i.name} x${i.qty}</span>
                <div class="flex gap-2"><span>¬•${(i.price*i.qty).toLocaleString()}</span><button onclick="delBatch(${idx})" class="text-red-400">√ó</button></div>
            </div>`).join('');
            
        document.getElementById('batch-total').innerText = '¬•' + total.toLocaleString();
        
        const pct = Math.min((total / 5500) * 100, 100);
        const bar = document.getElementById('batch-progress');
        if(bar) {
            bar.style.width = pct + '%';
            const status = document.getElementById('batch-status');
            if(total >= 5500) {
                bar.classList.replace('bg-[#b08d76]', 'bg-green-500');
                status.innerHTML = '<span class="text-green-600">‚ú® ÊÅ≠ÂñúÈÅîÊ®ôÔºÅÂèØÂÖçÁ®Ö</span>';
            } else {
                bar.classList.replace('bg-green-500', 'bg-[#b08d76]');
                status.innerText = `ÈÇÑÂ∑Æ ¬•${(5500-total).toLocaleString()}`;
            }
        }
        lucide.createIcons();
    }
    
    function delBatch(idx) { batchItems.splice(idx, 1); renderBatch(); }
    function resetBatch() { batchItems = []; renderBatch(); document.getElementById('batch-list').classList.add('hidden'); }
    function saveBatch() {
        if(batchItems.length===0) return;
        if(confirm('Â≠òÂÖ•Ë≥ºÁâ©Ë®òÂ∏≥Ôºü')) {
            const newItems = batchItems.map(i => ({ name: `[ÂÖçÁ®Ö] ${i.name}`, price: i.price, qty: i.qty }));
            budgetItems = [...budgetItems, ...newItems];
            resetBatch();
            renderBudget(); 
            alert('Â∑≤Â≠òÂÖ•');
        }
    }

    // --- Checklist ---
    function initChecklist() {
        document.querySelectorAll('input[type="checkbox"]').forEach(e=>{ 
            if(localStorage.getItem(e.id)==='true') e.checked=true; 
        });
    }
    function saveCheck(id) { 
        localStorage.setItem(id, document.getElementById(id).checked); 
    }
    function resetDaily() { 
        document.querySelectorAll('[id^="daily_"]').forEach(e=>{
            e.checked=false; 
            localStorage.setItem(e.id,'false');
        }); 
    }

    // --- UI/Modal ---
    let activeDayIdx = 0;

    function renderDaySelector() {
        const el = document.getElementById('day-selector');
        el.innerHTML = TRIP_DATA.map((d, i) => `
            <button onclick="setDay(${i})" class="flex-shrink-0 flex flex-col items-center group transition-all duration-300 ${i === activeDayIdx ? 'opacity-100 scale-110' : 'opacity-40 scale-100'}">
                <span class="text-[10px] font-bold tracking-widest mb-1 ${i === activeDayIdx ? 'text-[#b08d76]' : 'text-stone-400'}">${d.weekday}</span>
                <div class="w-12 h-12 rounded-full flex items-center justify-center border transition-all ${i === activeDayIdx ? 'bg-[#2c2c2c] text-[#f9f8f6] border-[#2c2c2c] shadow-lg' : 'bg-white text-stone-400 border-stone-200'}">
                    <span class="font-serif text-lg font-bold">${d.date.split('/')[1]}</span>
                </div>
            </button>
        `).join('');
    }
    function setDay(idx) { activeDayIdx = idx; renderDaySelector(); renderItinerary(); }

    function openModal(index) {
        currentModalData = TRIP_DATA[activeDayIdx].highlights[index];
        const data = currentModalData;
        const modal = document.getElementById('detail-modal');
        const content = document.getElementById('modal-content');
        const backdrop = document.getElementById('modal-backdrop');
        const panel = document.getElementById('modal-panel');

        // Render booking content safely
        const bookingContent = data.booking ? `üîñ ${data.booking}` : '';
        const bookingSection = (data.link && data.booking) 
            ? `<a href="${data.link}" target="_blank" class="block w-full text-center py-3 bg-[#b83838] text-white rounded-xl font-bold mb-4 shadow-md active:scale-95 transition-transform flex items-center justify-center gap-2"><i data-lucide="external-link" class="w-4 h-4"></i> ${data.booking} (ÈªûÊìäÈñãÂïü)</a>`
            : data.booking 
                ? `<div class="p-3 bg-stone-100 rounded-lg text-center font-mono text-stone-600 mb-6 font-bold tracking-wider">${bookingContent}</div>` 
                : '';

        let html = `
            <div class="mb-5">
                <span class="text-[10px] font-bold tracking-widest uppercase bg-stone-100 px-2 py-1 rounded text-stone-500">${data.type}</span>
                <h2 class="text-2xl font-serif font-bold text-stone-800 mt-2">${data.title}</h2>
                ${data.sub ? `<p class="text-sm text-[#b08d76] font-medium mt-1">${data.sub}</p>` : ''}
            </div>

            ${bookingSection}

            <div class="bg-[#f9f8f6] rounded-xl p-4 mb-6 space-y-3">
                ${data.address ? `<div class="flex gap-3 text-sm text-stone-600"><i data-lucide="map-pin" class="w-4 h-4 mt-0.5 flex-shrink-0 text-stone-400"></i> ${data.address}</div>` : ''}
                ${data.mapcode ? `<div class="flex gap-3 text-sm text-stone-600"><i data-lucide="navigation" class="w-4 h-4 mt-0.5 flex-shrink-0 text-stone-400"></i> MapCode: <span class="font-mono font-bold">${data.mapcode}</span></div>` : ''}
                ${data.tel ? `<div class="flex gap-3 text-sm text-stone-600"><i data-lucide="phone" class="w-4 h-4 mt-0.5 flex-shrink-0 text-stone-400"></i> ËªäÊ©üÂ∞éËà™ÈõªË©±: <span class="font-mono font-bold">${data.tel}</span></div>` : ''}
            </div>

            ${data.desc ? `<div class="mb-8"><h4 class="font-bold text-stone-800 text-sm mb-3 flex items-center gap-2"><i data-lucide="book-open" class="w-4 h-4 text-[#b08d76]"></i> ÈóúÊñºÊ≠§Ëôï</h4><p class="text-sm text-stone-600 leading-loose text-justify whitespace-pre-line font-light">${data.desc}</p></div>` : ''}

            ${data.speak ? `<div class="mb-8"><h4 class="font-bold text-stone-800 text-sm mb-3 flex items-center gap-2"><i data-lucide="languages" class="w-4 h-4 text-[#b08d76]"></i> ÊåáÂ∑ÆÊúÉË©±</h4><div class="grid grid-cols-2 gap-3">${data.speak.map(s => `<button onclick="speakJp('${s.jp}')" class="p-3 bg-white border border-stone-200 rounded-xl text-left active:bg-stone-50 transition"><div class="text-[10px] text-stone-400 mb-1">${s.label}</div><div class="font-bold text-stone-800 text-sm">${s.jp}</div></button>`).join('')}</div></div>` : ''}
            
            ${data.menu ? `<div class="mb-20"><h4 class="font-bold text-stone-800 text-sm mb-3 flex items-center gap-2"><i data-lucide="utensils" class="w-4 h-4 text-[#b08d76]"></i> ÂøÖÈªûÊé®Ëñ¶ (ÈªûÊìäÊîæÂ§ß)</h4><div class="space-y-2">${data.menu.map(m => `<div onclick="showBigCard('${m.name}','${m.jp}')" class="flex justify-between items-center p-3 bg-white border border-stone-100 rounded-xl cursor-pointer hover:border-[#b08d76] shadow-sm"><div><div class="font-bold text-stone-800">${m.name}</div><div class="text-xs text-stone-400">${m.jp}</div></div><span class="text-sm font-mono text-[#b08d76]">${m.price}</span></div>`).join('')}</div></div>` : ''}
            
            ${data.tabelog ? `<a href="${data.tabelog}" target="_blank" class="block w-full text-center py-3 bg-[#b83838] text-white rounded-xl font-bold mb-4">Tabelog È†êÁ¥Ñ / Ë≥áË®ä</a>` : ''}
            
            ${data.link ? `<a href="${data.link}" target="_blank" class="block w-full text-center py-3 bg-blue-600 text-white rounded-xl font-bold mb-4">ÈñãÂïüÈ†êÁ¥ÑÁ∂≤È†Å</a>` : ''}
        `;

        content.innerHTML = html;
        modal.classList.remove('hidden');
        lucide.createIcons();
        setTimeout(() => { backdrop.classList.remove('opacity-0'); panel.classList.remove('translate-y-full'); }, 10);
    }
    
    function closeModal() {
        const modal = document.getElementById('detail-modal');
        const backdrop = document.getElementById('modal-backdrop');
        const panel = document.getElementById('modal-panel');
        
        backdrop.classList.add('opacity-0');
        panel.classList.add('translate-y-full');
        setTimeout(() => { modal.classList.add('hidden'); }, 300);
    }
    
    // --- Helpers ---
    function openMap() { 
        if(!currentModalData) return; 
        const q = currentModalData.mapcode || currentModalData.address || currentModalData.title;
        window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(q)}`, '_blank');
    }
    function showBigCard(zh, jp) {
        document.getElementById('big-card-jp').innerText = jp;
        document.getElementById('big-card-zh').innerText = zh;
        document.getElementById('big-card-modal').classList.remove('hidden');
    }
    function closeBigCard() { document.getElementById('big-card-modal').classList.add('hidden'); }
    function getIcon(t) { if(t==='FLIGHT') return 'plane'; if(t==='CAR'||t==='DRIVE') return 'car'; if(t==='FOOD') return 'utensils'; if(t==='STAY') return 'bed-double'; if(t==='SHOP') return 'shopping-bag'; return 'map-pin'; }
    function speakJp(t, r) { if('speechSynthesis' in window){ const u=new SpeechSynthesisUtterance(t); u.lang='ja-JP'; u.rate=0.9; if(r) document.getElementById('speak-status').innerText='üîä '+r; window.speechSynthesis.speak(u); } }
    
    // Checklist & Budget Logic
    function initChecklist() { document.querySelectorAll('input[type="checkbox"]').forEach(e=>{ if(localStorage.getItem(e.id)==='true') e.checked=true; }); }
    function saveCheck(id) { localStorage.setItem(id, document.getElementById(id).checked); }
    function resetDaily() { document.querySelectorAll('[id^="daily_"]').forEach(e=>{e.checked=false; localStorage.setItem(e.id,'false');}); }
    
    function addBatchItem() { const n=document.getElementById('batch-name').value, p=parseInt(document.getElementById('batch-price').value), q=parseInt(document.getElementById('batch-qty').value)||1; if(n&&p){ batchItems.push({name:n,price:p,qty:q}); document.getElementById('batch-name').value=''; document.getElementById('batch-price').value=''; renderBatch(); } }
    function renderBatch() { const l=document.getElementById('batch-list'), t=batchItems.reduce((a,b)=>a+(b.price*b.qty),0); l.classList.remove('hidden'); l.innerHTML=batchItems.map((i,x)=>`<div class="flex justify-between text-xs mb-1"><span>${i.name} x${i.qty}</span><button onclick="batchItems.splice(${x},1);renderBatch()" class="text-red-400">√ó</button></div>`).join(''); document.getElementById('batch-total').innerText='¬•'+t.toLocaleString(); document.getElementById('batch-progress').style.width=Math.min((t/5500)*100,100)+'%'; if(t>=5500){ document.getElementById('batch-status').innerHTML='<span class="text-green-600">‚ú® OK</span>'; document.getElementById('batch-progress').classList.replace('bg-[#b08d76]','bg-green-500'); } }
    function resetBatch() { batchItems=[]; renderBatch(); }
    function saveBatch() { if(batchItems.length&&confirm('Save?')){ const items=batchItems.map(i=>({name:`[TaxFree] ${i.name}`,price:i.price,qty:i.qty})); budgetItems=[...budgetItems,...items]; localStorage.setItem('trip_budget',JSON.stringify(budgetItems)); resetBatch(); } }

    function addBudgetItem() { const n=document.getElementById('budget-name').value, p=parseInt(document.getElementById('budget-price').value), q=parseInt(document.getElementById('budget-qty').value)||1; if(n&&p){ budgetItems.push({name:n,price:p,qty:q}); localStorage.setItem('trip_budget',JSON.stringify(budgetItems)); document.getElementById('budget-name').value=''; document.getElementById('budget-price').value=''; renderBudgetList(); } }
    function clearBudget() { if(confirm('Clear?')){ budgetItems=[]; localStorage.setItem('trip_budget','[]'); renderBudgetList(); } }
    function renderBudgetList() { 
        const l=document.getElementById('budget-list'), t=budgetItems.reduce((a,b)=>a+(b.price*b.qty),0); 
        document.getElementById('total-jpy').innerText='¬•'+t.toLocaleString(); document.getElementById('total-twd').innerText='‚âà NT$ '+Math.round(t*exchangeRate).toLocaleString();
        l.innerHTML=budgetItems.map((i,x)=>`<li class="flex justify-between border-b border-stone-50 pb-1"><span class="text-stone-600">${i.name} x${i.qty}</span><div class="flex gap-2"><span>¬•${(i.price*i.qty).toLocaleString()}</span><button onclick="delBudget(${x})" class="text-stone-300 hover:text-red-400"><i data-lucide="trash-2" class="w-3 h-3"></i></button></div></li>`).join(''); 
        lucide.createIcons();
    }
    function delBudget(idx) { budgetItems.splice(idx, 1); localStorage.setItem('trip_budget', JSON.stringify(budgetItems)); renderBudgetList(); }

    // --- Render Pages ---
    function renderItinerary() {
        const day = TRIP_DATA[activeDayIdx];
        const container = document.getElementById('main-container');
        
        setTimeout(() => fetchDayWeather(day), 50);

        container.innerHTML = `
            <div class="animate-in pb-20">
                <!-- VJW Card -->
                ${day.date === '4/11' ? `
                <div class="bg-[#2c2c2c] rounded-2xl p-5 mb-8 shadow-xl relative overflow-hidden group cursor-pointer" onclick="window.open('https://vjw-lp.digital.go.jp/zh-hant/', '_blank')">
                    <div class="absolute right-[-20px] top-[-20px] w-24 h-24 bg-[#b08d76] rounded-full opacity-20 group-hover:scale-150 transition-transform duration-500"></div>
                    <p class="text-[10px] text-[#b08d76] font-bold tracking-[0.2em] uppercase mb-2">Must Have</p>
                    <h3 class="text-xl font-serif text-white font-bold mb-1">Visit Japan Web</h3>
                    <p class="text-xs text-stone-400 font-light">ÂÖ•Â¢ÉÂØ©Êü• & Êµ∑ÈóúÁî≥Â†± QR Code</p>
                    <i data-lucide="external-link" class="absolute right-5 bottom-5 text-white/50 w-5 h-5"></i>
                </div>` : ''}

                <!-- Date Header -->
                <div class="flex items-baseline justify-between mb-2 px-2">
                    <h2 class="text-3xl font-serif font-bold text-stone-800">${day.location} <span class="text-lg text-stone-400 font-normal">Trip</span></h2>
                    <span class="text-xs font-bold text-stone-400 tracking-widest">${day.day}</span>
                </div>
                
                <div id="day-weather" class="mb-6 px-2 text-right min-h-[20px]"><span class="text-xs text-stone-300">Loading...</span></div>

                <!-- Timeline -->
                <div class="relative space-y-8 pl-4">
                    <div class="timeline-line"></div>
                    
                    ${day.highlights.map((item, i) => `
                        <div class="relative pl-8 ${i === day.highlights.length - 1 ? 'last-item' : ''}">
                            <div class="absolute left-0 top-0 flex flex-col items-center w-12">
                                <span class="text-xs font-bold text-stone-400 mb-1 font-mono">${item.time}</span>
                                <div class="w-3 h-3 rounded-full border-2 border-[#f9f8f6] shadow-sm z-10 ${item.type === 'FOOD' ? 'bg-[#b08d76]' : 'bg-[#2c2c2c]'}"></div>
                            </div>

                            <div class="bg-white rounded-2xl p-5 soft-shadow active:scale-[0.98] transition-transform cursor-pointer border border-transparent hover:border-stone-100" onclick='openModal(${i})'>
                                <div class="flex justify-between items-start mb-2">
                                    <div>
                                        <span class="text-[9px] font-bold tracking-wider uppercase ${item.type === 'FOOD' ? 'text-[#b08d76]' : 'text-stone-400'} mb-1 block">${item.type}</span>
                                        <h3 class="text-lg font-bold text-stone-800 leading-tight">${item.title}</h3>
                                    </div>
                                    <div class="w-8 h-8 rounded-full bg-[#f9f8f6] flex items-center justify-center text-stone-400">
                                        <i data-lucide="${item.icon || getIcon(item.type)}" class="w-4 h-4"></i>
                                    </div>
                                </div>
                                ${item.link && item.booking 
                                    ? `<div class="mb-2 inline-flex items-center gap-1 bg-stone-100 px-2 py-1 rounded text-[10px] font-mono text-stone-600 border border-stone-200 shadow-sm"><i data-lucide="link" class="w-3 h-3"></i> ${item.booking}</div>`
                                    : item.booking 
                                        ? `<div class="mb-2 inline-flex items-center gap-1 bg-stone-100 px-2 py-1 rounded text-[10px] font-mono text-stone-600">üîñ ${item.booking}</div>` 
                                        : ''}
                                ${item.tips ? `<div class="mb-2 inline-flex items-center gap-1 bg-yellow-50 px-2 py-1 rounded text-[10px] font-mono text-yellow-700">üí° ${item.tips}</div>` : ''}
                                ${item.sub ? `<p class="text-sm text-[#b08d76] font-medium mb-1">${item.sub}</p>` : ''}
                                <p class="text-xs text-stone-500 leading-relaxed line-clamp-2">${item.desc}</p>
                            </div>
                        </div>
                    `).join('')}
                </div>
            </div>
        `;
        lucide.createIcons();
    }

    function renderHotels() {
        const uniqueHotels = [];
        const seen = new Set();
        TRIP_DATA.forEach(day => {
            day.highlights.forEach(h => {
                if(h.type === 'STAY') {
                    const key = h.booking || h.title;
                    if(!seen.has(key)) { seen.add(key); uniqueHotels.push({...h, date:day.date}); }
                }
            });
        });
        
        document.getElementById('main-container').innerHTML = `
            <div class="animate-in pb-20 space-y-5">
                <h2 class="text-2xl font-serif font-bold text-stone-800 mb-6 px-1">‰ΩèÂÆøÂàóË°®</h2>
                ${uniqueHotels.map(h => `
                    <div class="magazine-card p-6 flex flex-col gap-3 shadow-sm bg-white rounded-2xl border border-stone-100">
                        <div>
                            <span class="text-[10px] font-bold tracking-widest text-[#b08d76] bg-[#f0ebe7] px-2 py-0.5 rounded mb-2 inline-block">Check-in: ${h.date}</span>
                            <h3 class="font-serif font-bold text-lg text-stone-800 leading-snug">${h.title.replace('Check-in: ', '')}</h3>
                            <p class="text-xs text-stone-400 mt-1 font-mono tracking-wider uppercase">${h.desc}</p>
                        </div>
                        <div class="bg-[#fcfbf9] border border-[#f0f0f0] p-3 rounded text-center">
                            <p class="text-xs text-stone-400 uppercase tracking-widest mb-1">Á¢∫Ë™çÁ∑®Ëôü</p>
                            <p class="font-mono font-bold text-stone-700 tracking-wider text-lg">${h.booking || 'N/A'}</p>
                        </div>
                        <button onclick="window.open('https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(h.address || h.title)}', '_blank')" class="w-full mt-1 py-3 border border-stone-200 text-stone-600 text-xs font-bold uppercase tracking-widest rounded hover:bg-stone-800 hover:text-white transition-colors">Â∞éËà™È£ØÂ∫ó</button>
                    </div>
                `).join('')}
            </div>`;
        lucide.createIcons();
    }

    function renderDrive() {
        document.getElementById('main-container').innerHTML = `
            <div class="animate-in pb-20 space-y-5">
                <h2 class="text-2xl font-serif font-bold text-stone-800 mb-6 px-1">Ëá™ÈßïÊåáÂçó</h2>
                
                <!-- Gas Price -->
                <div class="bg-white rounded-2xl p-6 shadow-sm border border-stone-100">
                    <div class="flex justify-between items-center mb-4">
                        <h4 class="font-bold text-stone-800 flex items-center gap-2"><i data-lucide="fuel" class="w-5 h-5 text-[#b08d76]"></i> Âç≥ÊôÇÊ≤πÂÉπ (ÂèÉËÄÉ)</h4>
                        <a href="https://gogo.gs/" target="_blank" class="text-[10px] text-stone-400 underline flex items-center gap-1">gogo.gs Êü•ÂÉπ <i data-lucide="external-link" class="w-3 h-3"></i></a>
                    </div>
                    <div class="grid grid-cols-3 gap-3">
                        <div class="bg-[#ffebee] border border-red-100 p-3 rounded-xl text-center">
                            <p class="text-[10px] text-red-400 font-bold mb-1">Regular</p>
                            <p class="text-xl font-serif font-bold text-red-600">170<span class="text-xs">ÂÜÜ</span></p>
                            <p class="text-[9px] text-red-300 mt-1">Á¥ÖËâ≤Ê≤πÊßç</p>
                        </div>
                        <div class="bg-[#fff8e1] border border-yellow-100 p-3 rounded-xl text-center">
                            <p class="text-[10px] text-yellow-500 font-bold mb-1">High Octane</p>
                            <p class="text-xl font-serif font-bold text-yellow-600">181<span class="text-xs">ÂÜÜ</span></p>
                            <p class="text-[9px] text-yellow-400 mt-1">ÈªÉËâ≤Ê≤πÊßç</p>
                        </div>
                        <div class="bg-[#e8f5e9] border border-green-100 p-3 rounded-xl text-center">
                            <p class="text-[10px] text-green-500 font-bold mb-1">Diesel</p>
                            <p class="text-xl font-serif font-bold text-green-600">148<span class="text-xs">ÂÜÜ</span></p>
                            <p class="text-[9px] text-green-400 mt-1">Á∂†Ëâ≤Ê≤πÊßç</p>
                        </div>
                    </div>
                    <p class="text-[10px] text-stone-400 mt-2 text-center">*ÂÉπÊ†ºÂÉÖ‰æõÂèÉËÄÉÔºåË´ã‰ª•Áï∂Âú∞Âä†Ê≤πÁ´ôÁÇ∫Ê∫ñ</p>
                </div>

                <div class="bg-white rounded-2xl p-6 shadow-sm border border-stone-100">
                    <div class="flex items-start gap-4 mb-4">
                        <div class="bg-[#fbe9e7] p-3 rounded-full"><i data-lucide="alert-triangle" class="w-6 h-6 text-[#b85c38]"></i></div>
                        <div><h4 class="font-bold text-stone-800">Á´ãÂ±±ÈªëÈÉ®ÂÅúËªä (4/16)</h4><p class="text-sm text-stone-500 font-light mt-1">Ë´ãÂ∞éËà™Ëá≥„ÄåÁ´ãÂ±±Á´ô„ÄçÂ§ßÂûãÂÖçË≤ªÂÅúËªäÂ†¥„ÄÇÂª∫Ë≠∞Êó©‰∏ä 7:00 ÂâçÊäµÈÅî„ÄÇ</p></div>
                    </div>
                </div>
            </div>`;
        lucide.createIcons();
    }

    function renderTools() {
        document.getElementById('main-container').innerHTML = `
            <div class="animate-in pb-20 space-y-8">
                <!-- Checklist -->
                <section>
                    <h3 class="text-sm font-bold text-stone-400 uppercase tracking-widest mb-4 px-1">Ê™¢Êü•Ê∏ÖÂñÆ</h3>
                    <div class="bg-white rounded-2xl p-5 shadow-sm border border-stone-100 space-y-6">
                        ${TOOLS_DATA.checklist.map(cat => `
                            <div>
                                <span class="${cat.color} text-[10px] font-bold px-2 py-1 rounded uppercase tracking-wider mb-2 inline-block">${cat.name}</span>
                                <div class="grid grid-cols-2 gap-3 mt-2">
                                    ${cat.items.map(item => `
                                        <label class="flex items-center gap-2 cursor-pointer">
                                            <input type="checkbox" id="${item.id}" onchange="saveCheck(this.id)" class="hidden">
                                            <div class="w-4 h-4 rounded-full border border-stone-300 flex items-center justify-center bg-white"><i data-lucide="check" class="w-2.5 h-2.5 text-white check-icon"></i></div>
                                            <span class="text-xs font-medium text-stone-600 select-none">${item.label}</span>
                                        </label>
                                    `).join('')}
                                </div>
                            </div>
                        `).join('')}
                        <div class="pt-4 border-t border-stone-100">
                            <div class="flex justify-between items-center mb-3"><span class="text-xs font-bold text-stone-800">ÊØèÊó•ÈÄÄÊàøÊ™¢Êü•</span><button onclick="resetDaily()" class="text-[10px] text-stone-400 underline">ÈáçÁΩÆ</button></div>
                            <div class="space-y-3">
                                ${TOOLS_DATA.daily.map(item => `
                                    <label class="w-full flex items-center gap-3 cursor-pointer">
                                        <input type="checkbox" id="${item.id}" onchange="saveCheck(this.id)" class="hidden">
                                        <div class="w-4 h-4 rounded border border-stone-300 flex items-center justify-center bg-white"><i data-lucide="check" class="w-3 h-3 text-white check-icon"></i></div>
                                        <span class="text-sm text-stone-600 font-light select-none">${item.label}</span>
                                    </label>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Phrases -->
                <section>
                    <h3 class="text-sm font-bold text-stone-400 uppercase tracking-widest mb-4 px-1">ÊâãÊåáÊó•Ë™û</h3>
                    <div class="bg-white rounded-2xl p-5 shadow-sm border border-stone-100 grid grid-cols-2 gap-3">
                        ${TOOLS_DATA.jp.map(p => `
                            <button onclick="speakJp('${p.jp}')" class="p-4 bg-[#f9f9f9] border border-stone-100 rounded-xl text-left hover:border-stone-300 transition-colors flex flex-col justify-center h-24 shadow-sm active:scale-95">
                                <div class="text-xs text-stone-400 font-bold mb-2">${p.zh}</div>
                                <div class="font-serif font-bold text-stone-800 text-xl leading-snug">${p.jp}</div>
                            </button>
                        `).join('')}
                    </div>
                </section>

                <!-- Emergency -->
                <section>
                    <div class="bg-white rounded-2xl p-5 shadow-sm border border-red-100 flex justify-between items-center bg-[#fdf2f2] mb-4">
                        <div><h3 class="font-bold text-stone-800">Á∑äÊÄ•ËÅØÁµ°</h3><p class="text-xs text-stone-500 mt-1">Ë≠¶ÂØü 110 / ÊïëË≠∑Ëªä 119</p></div>
                        <div class="flex gap-2">
                            <a href="tel:110" class="w-10 h-10 bg-white rounded-full flex items-center justify-center text-red-500 font-bold shadow-sm">110</a>
                            <a href="tel:119" class="w-10 h-10 bg-white rounded-full flex items-center justify-center text-red-500 font-bold shadow-sm">119</a>
                        </div>
                    </div>

                    <!-- JNTO -->
                    <div class="p-3 bg-stone-50 rounded-xl flex justify-between items-center mb-2">
                        <div>
                            <p class="text-xs text-stone-400">Ë®™Êó•Â§ñÂúã‰∫∫ÁÜ±Á∑ö (JNTO)</p>
                            <p class="font-bold text-sm">050-3816-2787</p>
                            <p class="text-[10px] text-stone-400">24Â∞èÊôÇ / Ëã±Êó•‰∏≠Èüì</p>
                        </div>
                        <a href="tel:05038162787" class="w-10 h-10 bg-stone-200 rounded-full flex items-center justify-center text-stone-600"><i data-lucide="phone" class="w-5 h-5"></i></a>
                    </div>

                    <!-- TECO Osaka (For Nagoya) -->
                    <div class="p-4 bg-red-50 border border-red-100 rounded-xl">
                        <p class="text-xs text-red-500 font-bold mb-2">Âè∞ÂåóÈßêÂ§ßÈò™Á∂ìÊøüÊñáÂåñËæ¶‰∫ãËôï (ÁÆ°ËΩÑÂêçÂè§Â±ã)</p>
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-xs text-stone-600">ÊÄ•Èõ£ÊïëÂä© (Â∞à‰∫∫)</span>
                            <a href="tel:+819087944568" class="font-bold text-red-600 text-sm">090-8794-4568</a>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-xs text-stone-400">‰∏ÄËà¨‰∫ãÈ†Ö</span>
                            <a href="tel:+81662278623" class="text-xs text-stone-500">06-6227-8623</a>
                        </div>
                    </div>
                </section>

                <!-- Tax Free -->
                <section>
                    <div class="flex justify-between items-center mb-4 px-1"><h3 class="text-sm font-bold text-stone-400 uppercase tracking-widest">ÂÖçÁ®ÖÊπäÂñÆ</h3><button onclick="resetBatch()" class="text-[10px] text-stone-400 underline">Ê∏ÖÁ©∫</button></div>
                    <div class="bg-white rounded-2xl p-5 shadow-sm border border-stone-100 bg-[#fffcfc]">
                        <div class="mb-3 space-y-2">
                            <input id="batch-name" placeholder="ÂìÅÂêç" class="w-full p-2 bg-white border border-stone-200 rounded text-xs outline-none">
                            <div class="flex gap-2">
                                <input id="batch-price" type="number" placeholder="¬• ÂñÆÂÉπ" class="flex-1 p-2 bg-white border border-stone-200 rounded text-xs outline-none">
                                <input id="batch-qty" type="number" placeholder="Êï∏Èáè" value="1" class="w-16 p-2 bg-white border border-stone-200 rounded text-xs outline-none text-center">
                                <button onclick="addBatchItem()" class="bg-[#2c2c2c] text-white px-4 rounded text-xs"><i data-lucide="plus" class="w-3 h-3"></i></button>
                            </div>
                        </div>
                        <div id="batch-list" class="hidden mb-4 space-y-2"></div>
                        <div class="pt-3 border-t border-stone-100">
                            <div class="flex justify-between text-xs mb-2"><span class="text-stone-500">Á∏ΩË®à</span><span id="batch-total" class="font-bold text-stone-800">¬•0</span></div>
                            <div class="w-full bg-stone-100 h-1.5 rounded-full mb-2 overflow-hidden"><div id="batch-progress" class="h-full bg-[#b85c38] transition-all duration-500" style="width: 0%"></div></div>
                            <p id="batch-status" class="text-center text-[10px] font-bold text-[#b85c38] mb-4">ÈÇÑÂ∑Æ ¬•5,500</p>
                            <button onclick="saveBatch()" class="w-full py-2 border border-stone-300 text-stone-600 text-xs font-bold uppercase tracking-widest rounded hover:bg-stone-800 hover:text-white transition-colors">Â≠òÂÖ•Ë®òÂ∏≥</button>
                        </div>
                    </div>
                </section>
                
                <!-- Budget -->
                <section>
                    <div class="flex justify-between items-center mb-4 px-1"><h3 class="text-sm font-bold text-stone-400 uppercase tracking-widest">Ë≥ºÁâ©Ë®òÂ∏≥</h3><button onclick="resetBudget()" class="text-[10px] text-stone-400 underline">Ê∏ÖÁ©∫</button></div>
                    <div class="bg-white rounded-2xl p-5 shadow-sm border border-stone-100">
                        <div class="bg-[#f9f8f4] p-4 rounded mb-5 text-center">
                            <p class="text-[10px] text-stone-400 uppercase tracking-widest mb-1">Á∏ΩËä±Ë≤ª</p>
                            <p id="total-jpy" class="text-3xl font-serif font-bold text-stone-800">¬•0</p>
                            <p id="total-twd" class="text-xs text-stone-500 mt-1 font-light">‚âà NT$ 0</p>
                        </div>
                        <div class="mb-4 space-y-2">
                            <input id="budget-name" placeholder="ÂìÅÂêç" class="w-full p-2 bg-stone-50 border border-stone-100 rounded text-xs outline-none">
                            <div class="flex gap-2">
                                <input id="budget-price" type="number" placeholder="¬• ÂñÆÂÉπ" class="flex-1 p-2 bg-stone-50 border border-stone-100 rounded text-xs outline-none">
                                <input id="budget-qty" type="number" placeholder="Êï∏Èáè" value="1" class="w-16 p-2 bg-stone-50 border border-stone-100 rounded text-xs outline-none text-center">
                                <button onclick="addItem()" class="bg-[#2c2c2c] text-white px-4 rounded text-xs"><i data-lucide="plus" class="w-3 h-3"></i></button>
                            </div>
                        </div>
                        <ul id="budget-list" class="space-y-3 max-h-60 overflow-y-auto pr-1"></ul>
                    </div>
                </section>
            </div>
        `;
        lucide.createIcons();
        initChecklist();
        renderBudget();
    }

    // 3. EXECUTE ON LOAD
    document.addEventListener('DOMContentLoaded', () => {
        initDynamicPadding();
        renderDaySelector();
        renderItinerary();
        lucide.createIcons();
        fetchRate();
        fetchLocalWeather(); 
    });

    window.addEventListener('resize', initDynamicPadding);
</script>
</body>
</html>